/**
 * @license RequireJS i18n 2.0.6 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

!function(){define("normalize",[],function(){function t(t){return s(t).split("/").reduce(function(t,e,n){return 0===t.length||".."!==e?t.push(e):t.pop(),t},[]).join("/")}function e(e,i,r){if(i=t(i),r=t(r),e.match(l)||e.match(c))return e;e=t(e);var s=r.match(c),a=i.match(c);return!a||s&&s[1]==a[1]&&s[2]==a[2]?o(n(e,i),r):n(e,i)}function n(t,e){if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(l)||t.match(c))return t;var n=e.split("/"),o=t.split("/");for(n.pop();curPart=o.shift();)".."==curPart?n.pop():n.push(curPart);return n.join("/")}function o(t,e){var n=e.split("/");for(n.pop(),e=n.join("/")+"/",i=0;e.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=e.substr(i,1);)i--;e=e.substr(i+1),t=t.substr(i+1),n=e.split("/");var o=t.split("/");for(out="";n.shift();)out+="../";for(;curPart=o.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var r=/([^:])\/+/g,s=function(t){return t.replace(r,"$1/")},c=/[^\:\/]*:\/\/([^\/])*/,l=/^(\/|data:)/,a=function(t,n,o){for(var i,r,t,s=/@import\s*((?:"([^"]*)")|(?:'([^']*)'))|url\s*\(\s*(\s*(?:"([^"]*)")|(?:'([^']*)')|[^\)]*\s*)\s*\)/gi;i=s.exec(t);){r=i[3]||i[2]||i[5]||i[6]||i[4];var c;c=e(r,n,o);var l=i[5]||i[6]?1:0;t=t.substr(0,s.lastIndex-r.length-l-1)+c+t.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(c.length-r.length)}return t};return a.convertURIBase=e,a.absoluteURI=n,a.relativeURI=o,a}),define("css",[],function(){if("undefined"==typeof window)return{load:function(t,e,n){n()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,n=!1,o=!0;e[1]||e[7]?n=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]||e[8]||"WebkitAppearance"in document.documentElement.style?o=!1:e[4]&&(n=parseInt(e[4])<18);var i={};i.pluginBuilder="./css-builder";var r,s,c,l=function(){r=document.createElement("style"),t.appendChild(r),s=r.styleSheet||r.sheet},a=0,u=[],d=function(t){s.addImport(t),r.onload=function(){h()},31==++a&&(l(),a=0)},h=function(){c();var t=u.shift();if(!t)return void(c=null);c=t[1],d(t[0])},p=function(t,e){if(s&&s.addImport||l(),s&&s.addImport)c?u.push([t,e]):(d(t),c=e);else{r.textContent='@import "'+t+'";';var n=setInterval(function(){try{r.sheet.cssRules,clearInterval(n),e()}catch(t){}},10)}},f=function(e,n){var i=document.createElement("link");if(i.type="text/css",i.rel="stylesheet",o)i.onload=function(){i.onload=function(){},setTimeout(n,7)};else var r=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){if(document.styleSheets[t].href==i.href)return clearInterval(r),n()}},10);i.href=e,t.appendChild(i)};return i.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},i.load=function(t,e,o,i){(n?p:f)(e.toUrl(t+".css"),o)},i}),define("css!config/css/style",[],function(){}),function(){"use strict";function t(t,e,n,o,i,r){e[t]&&(n.push(t),!0!==e[t]&&1!==e[t]||o.push(i+t+"/"+r))}function e(t,e,n,o,i){var r=o+e+"/"+i;require._fileExists(t.toUrl(r+".js"))&&n.push(r)}function n(t,e,o){var i;for(i in e)!e.hasOwnProperty(i)||t.hasOwnProperty(i)&&!o?"object"==typeof e[i]&&(!t[i]&&e[i]&&(t[i]={}),n(t[i],e[i],o)):t[i]=e[i]}var o=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var r=i.config?i.config():{};return{version:"2.0.6",load:function(i,s,c,l){l=l||{},l.locale&&(r.locale=l.locale);var a,u,d,h=o.exec(i),p=h[1],f=h[4],b=h[5],m=f.split("-"),y=[],v={},g="";if(h[5]?(p=h[1],a=p+b):(a=i,b=h[4],f=r.locale,f||(f=r.locale="undefined"==typeof navigator?"root":(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage||"root").toLowerCase()),m=f.split("-")),l.isBuild){for(y.push(a),e(s,"root",y,p,b),u=0;u<m.length;u++)d=m[u],g+=(g?"-":"")+d,e(s,g,y,p,b);s(y,function(){c()})}else s([a],function(e){var o,i=[];for(t("root",e,i,y,p,b),u=0;u<m.length;u++)o=m[u],g+=(g?"-":"")+o,t(g,e,i,y,p,b);s(y,function(){var t,o,r;for(t=i.length-1;t>-1&&i[t];t--)r=i[t],o=e[r],!0!==o&&1!==o||(o=s(p+r+"/"+b)),n(v,o);c(v)})})}}})}(),define("nls/root",[],function(){"use strict";function t(){var t=[].slice.call(arguments),e=t[0],n=t.slice(1),o="";return e.split("{}").forEach(function(t,e){void 0!=n[e]&&(o+=t+(n[e]||""))}),o}function e(t,e,n){return e?t.find(function(t){return t.id===e})[n||"textId"]:null}function n(t){return void 0!=t?parseFloat((""+t).replace(",",".").replace(/\s/g,"")):null}function o(t,e){var n={year:"2-digit",month:"numeric",day:"numeric"};return e&&(n=Object.assign(n,{hour:"numeric",minute:"numeric",second:"numeric"})),void 0!=t?new Date(t).toLocaleDateString(void 0,n):null}function i(t){var e="0"+t;return e.substr(e.length-2)}function r(t){return t?[t.getFullYear(),i(t.getMonth()+1),i(t.getDate())].join("-"):null}function s(t){return t?6===t.length?new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]):new Date(t[0],t[1]-1,t[2]):null}function c(t,e,n){return t=(t||"string").charAt(0),["s"].includes(t)?String(e).localeCompare(String(n),void 0,{sensitivity:"base"}):["n"].includes(t)?Math.sign(e-n):["d"].includes(t)?Math.sign(e.getTime()-n.getTime()):0}function l(t,e){if(void 0!=e&&null!=e&&""!==e){if(["n"].includes(t.charAt(0))){if("number"==typeof e){var i=t.match(/\(([^)]+)\)/)[1];return n(e).toLocaleString(void 0,{minimumFractionDigits:i||0,maximumFractionDigits:i||0})}if("string"==typeof e)return n(e)}if(["p"].includes(t.charAt(0))){if("number"==typeof e)return n(100*e).toLocaleString(void 0,{})+"%";if("string"==typeof e)return n(e.split("%")[0])/100}if(["d"].includes(t.charAt(0))){if("object"==typeof e){var r=t.match(/\(([^)]+)\)/);return o(e,!(!r||"long"!==r[1]))}if("string"==typeof e&&e.indexOf(".")){var r=e.split(/\D+/);if(2===r[0].length&&2===r[1].length&&(2===r[2].length||4===r[2].length)){var s=new Date(parseInt(r[2]),parseInt(r[1])-1,parseInt(r[0]));return s.setFullYear((2===r[2].length?"20":"")+r[2]),s}}}if(["m"].includes(t.charAt(0))){var c=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],l=e.split(".");return c[n(l[1])-1]+" "+l[0]}}return e||""}function a(t){if(["n"].includes(t.charAt(0))){var e=parseInt(t.match(/\(([^)]+)\)/)[1]);return"#,##0"+(e?"."+"0".repeat(e):"")}return["d"].includes(t.charAt(0))?"dd.mm.yy":"@"}function u(t){t.element.inputmask({mask:"99.99.99",positionCaretOnTab:!1,insertMode:!1})}return{root:{composeText:t,getFieldValue:e,toDbDate:r,fromDbDate:s,toLocaleDateString:o,localeCompare:c,formatter:l,msoFormatter:a,inputMaskBuilder:u,table:{summaryText:"Итого:"},form:{titleMessage:"Сообщение",titleCreate:"Создание",titleCopy:"Копирование",titleEdit:"Редактирование",titleSelect:"Перемещение",titleRemove:"Удаление",submit:"OK",cancel:"Отмена",yes:"Да",no:"Нет"},frmRemove:{message:"Вы уверены, что хотите удалить запись "},frmBranchRemove:{message:"Вы уверены, что хотите удалить ветвь "},contextmenu:{create:{text:"Создать…"},copy:{text:"Дублировать…"},edit:{text:"Редактировать…"},remove:{text:"Удалить"},moveBranch:{text:"Переместить ветвь…"},removeBranch:{text:"Удалить ветвь"},copyData:{text:"Копировать данные",hotkey:"Alt+C"},copyTable:{text:"Копировать как таблицу",hotkey:"Alt+Shift+C"}},tooltip:{create:{text:"Создать…"},copy:{text:"Дублировать…"},edit:{text:"Редактировать…"},remove:{text:"Удалить"},moveBranch:{text:"Переместить ветвь…"},removeBranch:{text:"Удалить ветвь"},refresh:{text:"Обновить"},expandDown:{text:"Раскрыть выделенную ветвь полностью"},collapseDown:{text:"Свернуть выделенную ветвь полностью"}},view:{create:"Создать",copy:"Дублировать",edit:"Редактировать",remove:"Удалить"}}}}),define("text",["module"],function(t){"use strict";function e(t,e){return void 0===t||""===t?e:t}function n(t,n,o,i){if(n===i)return!0;if(t===o){if("http"===t)return e(n,"80")===e(i,"80");if("https"===t)return e(n,"443")===e(i,"443")}return!1}var o,i,r,s,c,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,h=d&&location.protocol&&location.protocol.replace(/\:/,""),p=d&&location.hostname,f=d&&(location.port||void 0),b={},m=t.config&&t.config()||{};return o={version:"2.0.15",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(u);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){n=l[e];try{t=new ActiveXObject(n)}catch(t){}if(t){l=[n];break}}return t},parseName:function(t){var e,n,o,i=!1,r=t.lastIndexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==r&&(!s||r>1)?(e=t.substring(0,r),n=t.substring(r+1)):e=t,o=n||e,r=o.indexOf("!"),-1!==r&&(i="strip"===o.substring(r+1),o=o.substring(0,r),n?n=o:e=o),{moduleName:e,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,i,r){var s,c,l,a=o.xdRegExp.exec(t);return!a||(s=a[2],c=a[3],c=c.split(":"),l=c[1],c=c[0],(!s||s===e)&&(!c||c.toLowerCase()===i.toLowerCase())&&(!l&&!c||n(s,l,e,r)))},finishLoad:function(t,e,n,i){n=e?o.strip(n):n,m.isBuild&&(b[t]=n),i(n)},load:function(t,e,n,i){if(i&&i.isBuild&&!i.inlineText)return void n();m.isBuild=i&&i.isBuild;var r=o.parseName(t),s=r.moduleName+(r.ext?"."+r.ext:""),c=e.toUrl(s),l=m.useXhr||o.useXhr;if(0===c.indexOf("empty:"))return void n();!d||l(c,h,p,f)?o.get(c,function(e){o.finishLoad(t,r.strip,e,n)},function(t){n.error&&n.error(t)}):e([s],function(t){o.finishLoad(r.moduleName+"."+r.ext,r.strip,t,n)})},write:function(t,e,n,i){if(b.hasOwnProperty(e)){var r=o.jsEscape(b[e]);n.asModule(t+"!"+e,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,e,n,i,r){var s=o.parseName(e),c=s.ext?"."+s.ext:"",l=s.moduleName+c,a=n.toUrl(s.moduleName+c)+".js";o.load(l,n,function(e){var n=function(t){return i(a,t)};n.asModule=function(t,e){return i.asModule(t,a,e)},o.write(t,l,n,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),o.get=function(t,e,n){try{var o=i.readFileSync(t,"utf8");"\ufeff"===o[0]&&(o=o.substring(1)),e(o)}catch(t){n&&n(t)}}):"xhr"===m.env||!m.env&&o.createXhr()?o.get=function(t,e,n,i){var r,s=o.createXhr();if(s.open("GET",t,!0),i)for(r in i)i.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),i[r]);m.onXhr&&m.onXhr(s,t),s.onreadystatechange=function(o){var i,r;4===s.readyState&&(i=s.status||0,i>399&&i<600?(r=new Error(t+" HTTP status: "+i),r.xhr=s,n&&n(r)):e(s.responseText),m.onXhrComplete&&m.onXhrComplete(s,t))},s.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?o.get=function(t,e){var n,o,i=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),c="";try{for(n=new java.lang.StringBuffer,o=s.readLine(),o&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),null!==o&&n.append(o);null!==(o=s.readLine());)n.append(r),n.append(o);c=String(n.toString())}finally{s.close()}e(c)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),c="@mozilla.org/windows-registry-key;1"in r,o.get=function(t,e){var n,o,i,l={};c&&(t=t.replace(/\//g,"\\")),i=new FileUtils.File(t);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(i,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),o.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),e(l.value)}catch(t){throw new Error((i&&i.path||"")+": "+t)}}),o}),define("text!icons/collapse.svg",[],function(){return'<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="502.65px" height="502.65px" viewBox="315.605 4.676 502.65 502.65" enable-background="new 315.605 4.676 502.65 502.65"\r\n\t xml:space="preserve">\r\n<path d="M746.153,125.802l-179.181,172.58L387.705,125.801c-16.499-16.499-43.229-19.8-59.726-3.301\r\n\tc-16.499,16.5-16.5,39.929,0,56.426l209.128,209.048c16.5,16.498,43.228,16.5,59.728,0L805.88,178.926\r\n\tc16.5-16.497,16.5-39.926,0-56.426C789.38,106.001,762.653,109.302,746.153,125.802L746.153,125.802L746.153,125.802\r\n\tL746.153,125.802z"/>\r\n</svg>\r\n'}),define("text!icons/expand.svg",[],function(){return'<svg version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="502.65px" height="502.65px" viewBox="315.605 4.676 502.65 502.65" enable-background="new 315.605 4.676 502.65 502.65"\r\n\t xml:space="preserve">\r\n<path fill="#666666" d="M543.708,76.777l172.581,179.181L543.708,435.225c-16.5,16.499-19.801,43.229-3.302,59.727\r\n\tc16.5,16.499,39.929,16.5,56.425,0L805.88,285.822c16.5-16.5,16.5-43.228,0-59.727L596.833,17.051\r\n\tc-16.496-16.5-39.926-16.5-56.426,0S527.208,60.277,543.708,76.777L543.708,76.777L543.708,76.777L543.708,76.777z"/>\r\n</svg>\r\n'}),define("icons/dir",["text!./collapse.svg","text!./expand.svg"],function(t,e){"use strict";return{collapse:t,expand:e}}),define("rear/rear",[],function(){"use strict";function t(t,e){var n=["_requestParams","_handler_"];for(var o in e)!e.hasOwnProperty(o)||t.hasOwnProperty(o)||n.includes(o)||(t[o]=e[o])}function e(t){e.instanceId=void 0===e.instanceId?0:e.instanceId+1,this._instanceId_=e.instanceId,this._isResolved_=!1,this._children_=[],this._context_=i.currentContext,this._context_&&this._context_._children_.push(this),t&&(this._requestParams=t),o&&(this._request_=t,i.instances[this._instanceId_]=this)}function n(t){e.call(this),this.parameters=t||{},this._isResolved_=!0}var o=!1,i={currentContext:null};return e.prototype._setHandler_=function(t){return this._isResolved_?t():this._handler_=t,this},e.prototype._resolve_=function(){return this._isResolved_?void console.error("The object with the _instanceId_="+this._instanceId_+" has already been resolved"):(0===this._children_.filter(function(t){return!t._isResolved_}).length&&(this._isResolved_=!0,this.hasOwnProperty("_handler_")?this._handler_():this._context_&&this._context_._resolve_()),this)},e.prototype._sendRequest=function(){},e.prototype._oncomplete=function(t,e){this.status=t,this._response_=e,this._resolve_()},n.prototype=Object.create(e.prototype),n.prototype.constructor=e,n.prototype.fetch=function(n){var o=Object.create(this);return e.call(o,n),this._setHandler_(function(){t(o,this),o._sendRequest()}.bind(this)),o},n.prototype.execute=function(n){var r=Object.create(this);return e.call(r),o&&(r._request_="execute"),this._setHandler_(function(){if(!1!==this._response_){t(r,this);var e=i.currentContext;i.currentContext=r;var o=n.call(r,r._response_);r._response_=void 0!=o?o:r._response_,i.currentContext=e}r._resolve_()}.bind(this)),r},i.Suspended=n,o&&(i.instances=[],console.log("rear",i)),i}),define("rear/Composite",["./rear"],function(t){"use strict";function e(e){t.Suspended.call(this,e)}return e.prototype=Object.create(t.Suspended.prototype),e.prototype.constructor=e,e.prototype.sendRequestSync=function(t){var e=[],n=function(o){return t[o]().execute(function(i){e.push(i),o+=1,t[o]&&n(o)})};return this.execute(function(t){return n(0),e})},e.prototype.sendRequestAsync=function(t){return this.execute(function(){var e=[];return t.forEach(function(t,n){t().execute(function(t){e[n]=t}.bind(this))}.bind(this)),e})},e}),define("dao/Composite",["rear/Composite"],function(t){"use strict";return t}),define("rear/FR",["./rear"],function(t){"use strict";function e(e){t.Suspended.call(this,e)}return e.prototype=Object.create(t.Suspended.prototype),e.prototype.constructor=e,e.prototype._sendRequest=function(){var t=new FileReader;t.onload=function(e){this._oncomplete(t.result)}.bind(this),t[this._requestParams.method](this._requestParams.file,this._requestParams.encoding)},e}),define("dao/ExcelFR",["rear/FR","i18n!nls/root"],function(t,e){"use strict";function n(e){t.call(this),this.application=e}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.parse=function(t){return t},n.prototype.processData=function(t,n,o){var i={method:"readAsBinaryString",file:t};return this.fetch(i).execute(function(i){var r=XLSX.read(i,{type:"binary"}),s=r.Sheets[n];if(!s)return this.application.showDialog(e.error.excelFR.header,e.error.excelFR.text+'"'+n+'"',null),null;var c=XLSX.utils.sheet_to_row_object_array(s);c=c.map(function(t){return this.parse(t)}.bind(this));var l=o(c);l&&(XLSX.utils.sheet_add_aoa(s,l.data,{origin:l.origin}),XLSX.writeFile(r,t.name))}.bind(this))},n}),define("rear/XHR",["./rear"],function(t){"use strict";function e(e){t.Suspended.call(this,e)}return e.prototype=Object.create(t.Suspended.prototype),e.prototype.constructor=e,e.prototype._postProcessor=function(t){return t?function(t){try{var e=JSON.parse(t)}catch(e){return t}return e}(t):null},e.prototype._sendRequest=function(){"string"==typeof this._requestParams&&(this._requestParams={type:"GET",url:this._requestParams});var t=new XMLHttpRequest;return t.onload=function(t){var e="000",n={status:e};t.target&&(e=t.target.status,n=200===e?this._postProcessor(t.target.response):{status:e,code:t.target.getResponseHeader("ReturnCode")}),this._oncomplete(e,n)}.bind(this),t.open(this._requestParams.type,this._requestParams.url,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send(JSON.stringify(this._requestParams.data)),this},e.prototype.execute=function(e,n){function o(t){return 200===this.status?e.call(this,t):n.call(this,t)}return t.Suspended.prototype.execute.call(this,o)},e}),define("dao/FunctionXHR",["rear/XHR"],function(t){"use strict";function e(e){t.call(this,e)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.post=function(t,e){var n={type:"POST",url:this.parameters.rootUrl+(t||""),data:e};return this.fetch(n)},e.prototype.getValue=function(t,e){var n={type:"GET",url:this.parameters.rootUrl+(t||"")};return!1!==e&&(n.url+=(n.url.search("\\?")>-1?"&":"?")+"timestamp="+(new Date).getTime()),this.fetch(n)},e}),define("dao/ListXHR",["rear/XHR"],function(t){"use strict";function e(e){t.call(this,e)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._postProcessor=function(e){e=t.prototype._postProcessor.call(this,e);var n=[];return e&&(n=e.map(function(t){return this.parse(t)}.bind(this))),n},e.prototype.parse=function(t){return t},e.prototype.unparse=function(t){return t},e.prototype.create=function(t,e){var n={type:"POST",url:this.parameters.rootUrl+(e||""),data:this.unparse(t)};return this.fetch(n)},e.prototype.edit=function(t,e){var n={type:"PUT",url:this.parameters.rootUrl+(e||""),data:this.unparse(t)};return this.fetch(n)},e.prototype.remove=function(t){var e={type:"DELETE",url:this.parameters.rootUrl,data:this.unparse(t)};return this.fetch(e)},e.prototype.getData=function(t,e){var n={type:"GET",url:this.parameters.rootUrl+(t||(0===parseInt(t)?"0":""))};return!1!==e&&(n.url+=(n.url.search("\\?")>-1?"&":"?")+"timestamp="+(new Date).getTime()),this.fetch(n)},e}),define("dao/TextFR",["rear/FR"],function(t){"use strict";function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.getData=function(t,e){var n={method:"readAsText",file:t,encoding:e};return this.fetch(n)},e}),define("dao/TreeXHR",["rear/XHR"],function(t){"use strict";function e(t,n){t.node=n(t.node),t.collection.forEach(function(t){e(t,n)})}function n(e){t.call(this,e)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._postProcessor=function(n){return n=t.prototype._postProcessor.call(this,n),e(n,function(t){return this.parse(t)}.bind(this)),n},n.prototype.parse=function(t){return t},n.prototype.unparse=function(t){return t},n.prototype.create=function(t,e){var n={type:"POST",url:this.parameters.rootUrl+(e||""),data:this.unparse(t)};return this.fetch(n)},n.prototype.edit=function(t,e){var n={type:"PUT",url:this.parameters.rootUrl+(e||""),data:this.unparse(t)};return this.fetch(n)},n.prototype.moveBranch=function(t,e){e="?whatId="+t.what+"&position="+t.position+"&whereId="+t.where+(e||"");var n={type:"POST",url:this.parameters.rootUrl+"move/"+e};return this.fetch(n)},n.prototype.removeBranch=function(t,e){var n={type:"DELETE",url:this.parameters.rootUrl,data:this.unparse(t)};return this.fetch(n)},n.prototype.getData=function(t,e){var n={type:"GET",url:this.parameters.rootUrl+(t||(0===parseInt(t)?"0":""))};return!1!==e&&(n.url+=(n.url.search("\\?")>-1?"&":"?")+"timestamp="+(new Date).getTime()),this.fetch(n)},n}),define("dao/dir",["./Composite","./ExcelFR","./FunctionXHR","./ListXHR","./TextFR","./TreeXHR"],function(t,e,n,o,i,r){"use strict";return{Composite:t,ExcelFR:e,FunctionXHR:n,ListXHR:o,TextFR:i,TreeXHR:r}}),define("core/WindowManager",[],function(){"use strict";function t(t){this.application=t,this.context=t,this.element=this.context.element.children('[name="windows"]'),this.windows=[]}return t.prototype._on_=function(t,e,n){return["control:focusin"].includes(e)&&t.root===this?(t!=this.activeElement&&this.setActiveElement(t),this.activeElement.focus(),!1):["window:destroy"].includes(e)?(this.removeWindow(t),!1):void this.context._on_(t,e,n)},t.prototype.setActiveElement=function(t){return this.activeElement&&this.activeElement!=t&&this.activeElement.setActiveStatus("none"),this.windows.splice(t.itemId,1),this.windows.push(t),this.windows.forEach(function(t,e){t.setItemId(this,e)}.bind(this)),t.backdrop?t.backdrop.appendTo(this.element):t.element.appendTo(this.element),t&&!t.isActive&&t.setActiveStatus("inactive"),this.activeElement=t},t.prototype.addWindow=function(t,e){var n=t(this).setItemId(this,this.windows.length);return e&&(n.backdrop=n.element.wrap($("<div>").css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}).on({mousedown:function(t){t.preventDefault(),t.stopPropagation()}})).parent()),this.windows.push(n),this.windows[this.windows.length-1].focus()},t.prototype.removeWindow=function(t){t===this.activeElement&&(t.backdrop?t.backdrop.remove():t.element.remove(),this.windows.splice(this.windows.length-1,1),this.windows.length&&this.windows[this.windows.length-1].focus())},t}),define("core/Backdrop",[],function(){"use strict";function t(t,e){this.initiator=t,this.initZIndex=t.element[0].style["z-index"],this.element=$("<div>").appendTo("body").css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",opacity:"0"}).on({mousedown:function(t){if(t.preventDefault(),e&&e(this.initiator,t),1===t.which){var n=$(document.elementFromPoint(t.clientX,t.clientY));if(n.focus().trigger({type:"mousedown",which:t.which}),!document.activeElement.offsetParent)for(;n[0]&&n[0]!=document.activeElement;)n=n.parent().focus()}}.bind(this)})}return t.prototype.setZIndex=function(t){return this.element.css({"z-index":t}),this.initiator.element.css({"z-index":t+1}),this},t.prototype.destroy=function(){return this.initiator.element.css({"z-index":this.initZIndex}),this.element.remove(),this},t}),define("core/Contextmenu",["./Backdrop"],function(t){"use strict";function e(t,e,n,o,i,r){this.context=t,this.source=e,this.element=$("<div>").prependTo(t.element).css({padding:"8px 26px"}).hover(function(t){$(this).css("background-color","#eee")},function(t){$(this).css("background-color","white")}).html(n).append($("<div>").css({float:"right","padding-left":"50px",color:"#aaa"}).html(o)),this.handler=i,r?this.disable():this.enable()}function n(t){this.context=t,this.template=$("<div>").css({position:"fixed","min-width":"200px","background-color":"white",border:"1px solid #aaa","box-shadow":"4px 4px 5px -3px rgba(0, 0, 0, .7)",padding:"2px 0px","font-family":'Roboto, "Segoe UI", Tahoma, sans-serif',"line-height":"0.6"}),this.onKeydown=this.hide.bind(this),this.items={}}return e.prototype.enable=function(){this.disable(),this.element.css({color:"#000"}).on({mousedown:function(t){t.preventDefault(),1===t.which&&(this.handler(this.source),this.context.hide())}.bind(this)})},e.prototype.disable=function(){this.element.css({color:"#aaa"}).off("mousedown").on({mousedown:function(t){t.preventDefault()}})},n.prototype.addItem=function(t,n,o,i,r,s){this.items[n]=new e(this,t,o,i,r,s)},n.prototype.show=function(e,n,o){this.activeElement=$(document.activeElement).keydown(this.onKeydown),this.element=this.template.clone(!0).appendTo(this.context.element),this.backdrop=new t(this,function(t,e){t.hide()}).setZIndex(999),o.forEach(function(t){this.addItem(t.source,t.name,t.text,t.hotkey,t.handler,t.disabled)}.bind(this));var i=e+this.element.outerWidth()-this.context.element.width(),r=n+this.element.outerHeight()-this.context.element.height();this.element.css({left:e-(i>0?i:0),top:n-(r>0?r:0)}),this.element.on({mousedown:function(t){t.preventDefault()},contextmenu:function(t){t.preventDefault(),t.stopPropagation()}})},n.prototype.hide=function(){this.items={},this.backdrop.destroy(),delete this.backdrop,this.element.remove(),delete this.element,this.activeElement.off("keydown",this.onKeydown),delete this.activeElement},n}),define("core/Application",["./WindowManager","./Contextmenu"],function(t,e){"use strict";function n(n){this.element=$("body").empty().append(n),this.application=this,$('<div name="windows"></div>').appendTo(this.element),this.windowManager=new t(this),this.contextmenu=new e(this)}return n.prototype._on_=function(t,e,n){["control:showcontextmenu"].includes(e)&&this.contextmenu.show(n.left,n.top,n.contextmenuItems),this.on(t,e,n)},n.prototype.on=function(t,e,n){},n.prototype.addContent=function(t){return t.forEach(function(t){var e=t.builder(this);e&&(this.controls[t.name]=e)}.bind(this)),this},n.prototype.setContent=function(t){return this.controls={},this.addContent(t)},n.prototype.addWindow=function(t,e){return this.windowManager.addWindow(t,e)},n}),define("core/Control",[],function(){"use strict";function t(e,n,o){t.instanceId=void 0===t.instanceId?0:t.instanceId+1,this.instanceId=t.instanceId,this.application=e.application,this.context=e;var i=this.context.element,r="children";if(n.split("/").forEach(function(t){"*"===t?r="find":(i=t?i[r]('[name="'+t+'"]'):i,r="children")}),0===i.length&&console.error('No "'+n+'" element was found as a child of',this.context.element),i.length>1&&console.error('More than one "'+n+'" element was found as a child of',this.context.element),o&&"create:"===o.slice(0,7)){var o=o.slice(7),s=$(o);this.element=1===s.length?s.appendTo(i):i.append(o)}else this.element=i.append(o||"");this.name=this.element.attr("name"),this._onfocus=[],this._ondropfocus=[],this._ondrag=[],this._ondrop=[],this.contextmenuItems=[],this.element.on({keydown:function(t){[9].includes(t.which)&&(t.preventDefault(),t.stopPropagation(),this._on_(this,"control:tabulate",t)),[12].includes(t.which)&&(t.stopPropagation(),this._on_(this,"control:into",t)),[27].includes(t.which)&&(t.stopPropagation(),this._on_(this,"control:escape",t)),[38,40].includes(t.which)&&(t.preventDefault(),t.stopPropagation(),this._on_(this,"control:updown",t)),[37,39].includes(t.which)&&(t.preventDefault(),t.stopPropagation(),this._on_(this,"control:leftright",t))}.bind(this),mousedown:function(t){t.stopPropagation(),1!=t.which&&t.preventDefault(),t.target.scrollHeight>t.target.clientHeight&&t.preventDefault(),this._ondrag.length+this._ondrop.length&&this.dragdrop(t)}.bind(this),focusin:function(t){t.stopPropagation(),this._on_(this,"control:focusin",t)}.bind(this),focusout:function(t){t.stopPropagation(),this._on_(this,"control:focusout",t)}.bind(this),focus:function(t){this._onfocus.forEach(function(e){e(t)})}.bind(this)})}return t.prototype._on_=function(t,e,n){if(["control:focusin"].includes(e)&&(this.isActive||this.setActiveStatus("active")),["control:focusout"].includes(e)){if(this.element.is(n.relatedTarget)||this.element.has(n.relatedTarget).length)return;this.isActive&&this.setActiveStatus("inactive")}["control:showcontextmenu"].includes(e)&&(n.contextmenuItems=n.contextmenuItems.concat(this.contextmenuItems)),!1!==this.on(t,e,n)&&this.context._on_(t,e,n)},t.prototype.on=function(t,e,n){},t.prototype.send=function(t,e){return this.context._on_(this,t,e),this},t.prototype.setItemId=function(t,e){return this.root=t,this.itemId=e,this},t.prototype.setActiveStatus=function(t){return this.isActive="active"===t,this},t.prototype.onfocus=function(t){return this._onfocus.push(t),this},t.prototype.ondropfocus=function(t){return this._ondropfocus.push(t),this},t.prototype.focus=function(t){var e=t||this.activeElement||this.getDefaultActiveElement();return e&&!e.isActive?e.focus():this.element.is(document.activeElement)||this.isActive||(this.element.focus(),this._ondropfocus.forEach(function(t){t(event)})),this},t.prototype.ondragdrop=function(t,e){return t&&this._ondrag.push(t),e&&this._ondrop.push(e),this},t.prototype.dragdrop=function(t){var e=this.element.offset(),n={top:t.pageY,left:t.pageX},o=this._ondrag,i=function(t){o.forEach(function(o){o(e,n,t)})};$(document).on({mousemove:i}).one("mouseup",function(t){$(document).off("mousemove",null,i),this._ondrop.forEach(function(o){o(e,n,t)})}.bind(this))},t.prototype.setContextmenu=function(t){return t&&t.length&&(this.contextmenuItems=t.map(function(t){return Object.assign({source:this},t)}.bind(this)),this.element.on({contextmenu:function(t){t.preventDefault(),t.stopPropagation();var e={left:t.clientX,top:t.clientY,contextmenuItems:this.contextmenuItems};this.send("control:showcontextmenu",e)}.bind(this)})),this},t.prototype.isVisible=function(){return!!this.element[0].offsetHeight},t.prototype.setVisibility=function(t){return t?this.element.show():this.element.hide(),this},t.prototype.getDefaultActiveElement=function(){return null},t}),define("core/primitives",["./Control"],function(t){"use strict";function e(e,n,o){t.call(this,e,n),this.element.prepend(o||"")}function n(e,n,o,i){t.call(this,e,n),this.element.html(o).addClass("tooltip").css({position:"absolute","z-index":"999"});var r={left:i.clientX+5,top:i.clientY-parseInt(this.element.outerHeight())-5},s={left:r.left+parseInt(this.element.outerWidth())-$(window).width()+5,top:5-r.top};this.element.offset({left:r.left-(s.left>0?s.left:0),top:r.top+(s.top>0?s.top:0)})}function o(e,o,i,r,s){function c(t){a={clientX:t.clientX,clientY:t.clientY}}if(t.call(this,e,o),this.handler=i,r){var l=null,a={};this.element.hover(function(t){l=t,$(document).on("mousemove",c),setTimeout(function(){l===t&&(this.element.append('<div name="tooltip"></div>'),this.tooltip=new n(this,"tooltip",r,a))}.bind(this),1e3)}.bind(this),function(t){l=null,a={},$(document).off("mousemove",null,c),a={},this.tooltip&&(this.tooltip.element.remove(),delete this.tooltip)}.bind(this))}s&&(this.backdrop=$('<div name="backdrop"></div>').css({background:"white",width:"100%",height:"100%",opacity:1}).appendTo(this.element),$(s).appendTo(this.backdrop).css({width:"100%",height:"100%"})),this.element.on({keydown:function(t){[13].includes(t.which)&&(t.preventDefault(),this.click())}.bind(this),mousedown:function(t){t.preventDefault(),1===(t.which||1)&&this.click()}.bind(this)})}function i(t,e,n,i,r){o.call(this,t,e,n,i,r)}function r(t,e,n,i,r){o.call(this,t,e,n,i,r)}function s(e,n,o,i,r){t.call(this,e,n),this.fn=this._fnName_(),this.formatter="function"==typeof o?o:function(t){return t},this.calculator=i,"function"==typeof r&&r(this),this.element.on({input:function(t){
this.value=this.formatter(this.element[this.fn]()),this.send("field:input",t)}.bind(this),change:function(t){t.stopPropagation(),this.send("control:changed",t)}.bind(this)}),this.ondropfocus(this.setSelectionRange.bind(this))}function c(e,n){t.call(this,e,n),this.radios=this.element.find('[type="radio"]')}var l={};return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l.Label=e,n.prototype=Object.create(t.prototype),n.prototype.constructor=n,l.Tooltip=n,o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.click=function(){this.handler(this)},o.prototype.disabled=function(t){return this.element.prop("disabled",t),this.backdrop&&this.backdrop.css("opacity",t?.4:1),this},o.prototype.setValue=function(t){return this.element.html(t),this},o.prototype.getValue=function(){return this.element.html()},l.Button=o,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.click=function(){$('<input type="file" />').on({change:function(t){this.handler(this,t.target.files)}.bind(this)}).click()},l.ButtonFile=i,r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.toggle=function(t){return this.state=!!t,this.element.toggleClass("button-pressed",this.state),this},r.prototype.click=function(){this.toggle(!this.state),o.prototype.click.call(this)},l.ButtonToggle=r,s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype._fnName_=function(){return["INPUT","SELECT","TEXTAREA"].includes(this.element.prop("tagName"))?"val":"html"},s.prototype.on=function(e,n,o){return["control:focusout"].includes(n)&&this.element[this.fn](this.formatter(this.value)),t.prototype.on.call(this,e,n,o)},s.prototype.setSelectionRange=function(){"function"==typeof this.element[0].setSelectionRange&&"date"!=this.element.attr("type")&&this.element[0].setSelectionRange(0,this.element[this.fn]().length)},s.prototype.setValue=function(t){return this.value="function"==typeof this.calculator?this.calculator(this.context,this,t):t,this.element[this.fn](this.formatter(this.value)),this},s.prototype.getValue=function(){return this.value},l.Field=s,c.prototype=Object.create(t.prototype),c.prototype.constructor=c,c.prototype.on=function(t,e,n){["control:leftright"].includes(e)&&this.nextItem(38===n.which?-1:1)},c.prototype.getActiveElement=function(){return this.radios.filter(function(t,e){return e.checked})[0]},c.prototype.nextItem=function(t){var e=this.radios.index(this.getActiveElement());(this.radios.length>1?this.radios[e<this.radios.length-1?e+t:0]:null).checked=!0},c.prototype.setValue=function(t){return this.radios.filter(function(e,n){return n.value===t})[0].checked=!0,this},c.prototype.getValue=function(){return this.getActiveElement().value},l.Radio=c,l}),define("core/Window",["./Control","./primitives"],function(t,e){"use strict";function n(e,n){t.call(this,e,n),this.element.css({margin:"auto","margin-left":"0",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","pointer-events":"none"})}function o(o){t.call(this,o,"handle"),this.element.css({display:"flex","justify-content":"space-between"}),$('<div class="window-handle-title" name="title"></div>').appendTo(this.element),this.title=new n(this,"*/title"),$('<button style="font-size: 110%;" name="close">&#x2716</button>').appendTo(this.element),this.btnClose=new e.Button(this,"*/close",this.context.destroy.bind(this.context)),this.element.on({mousedown:function(t){t.shiftKey&&t.preventDefault(),1===t.which&&this.send("handle:mousedown",t)}.bind(this)})}function i(e,n){t.call(this,e,"",'create:<div class="window" name="window"></div>'),this.element.attr({tabindex:0}),$('<div class="window-handle" name="handle"></div>').appendTo(this.element),this.handle=new o(this),$('<div class="window-content" name="content"></div>').appendTo(this.element),this.content=n(this);var i=$('<div class="window-body" name="body"></div>').css({flex:"1 0 100%",display:"flex"});this.content.element.wrap(i),this.element.css({position:"absolute"}),this.element.css({top:Math.max(($(window).height()-this.element.height())/4,20)+"px",left:Math.max(($(window).width()-this.element.width())/2,20)+"px"}),this.ondragdrop(function(t,e,n){var o={top:n.pageY-e.top,left:n.pageX-e.left};this.element.offset({top:t.top+o.top,left:t.left+o.left})}.bind(this)),this.element.hide().fadeTo(400,1)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.setValue=function(t){return this.element.html(t),this},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.on=function(t,e,n){return["control:focusin"].includes(e)?(this.send(e,n),!1):["handle:mousedown"].includes(e)&&t.context===this?(this.dragdrop(n),!1):["execute"].includes(e)&&t.context===this?(this[n](),!1):void(["setHeader"].includes(e)&&t.context===this&&this.setHeader(n))},i.prototype.getDefaultActiveElement=function(){return this.content},i.prototype.destroy=function(){this.send("window:destroy")},i.prototype.setHeader=function(t){return this.handle.title.setValue(t),this},i}),define("fore/application/class",["core/Application","core/Window"],function(t,e){"use strict";function n(t,n){e.call(this,t,n)}function o(e,n){t.call(this,e),n&&(this.dao=n(this.application))}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.setActiveStatus=function(t){return this.handle.element.toggleClass("window-handle-selected",["active","inactive"].includes(t)),e.prototype.setActiveStatus.call(this,t)},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.addWindow=function(e,o){var i=function(t){return new n(t,e)}.bind(this);return t.prototype.addWindow.call(this,i,o)},o}),define("fore/application/builder",["./class"],function(t){"use strict";function e(e,n){return new(n||t)(e.template,e.daoBuilder).setContent(e.controls)}return e}),define("fore/application/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/button/class",["core/primitives"],function(t){"use strict";function e(e,n,o,i,r){t.Button.call(this,e,n,o,i,r)}return e.prototype=Object.create(t.Button.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.element.toggleClass("button-active",["active"].includes(e)),this.element.toggleClass("button-inactive",["inactive"].includes(e)),t.Button.prototype.setActiveStatus.call(this,e)},e}),define("fore/button/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=n.split("/"),s=r[r.length-1],c="function"==typeof o.handler?o.handler.bind(e):e[s]?e[s].bind(e):function(){},l=new(i||t)(e,n,c,o.tooltip,o.image);return void 0!=o.defaultValue&&l.setValue(o.defaultValue),l}return e}),define("fore/button/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/buttonFile/class",["core/primitives"],function(t){"use strict";function e(e,n,o,i,r){t.ButtonFile.call(this,e,n,o,i,r)}return e.prototype=Object.create(t.ButtonFile.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.element.toggleClass("button-active",["active"].includes(e)),this.element.toggleClass("button-inactive",["inactive"].includes(e)),t.ButtonFile.prototype.setActiveStatus.call(this,e)},e}),define("fore/buttonFile/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=n.split("/"),s=r[r.length-1],c="function"==typeof o.handler?o.handler.bind(e):e[s]?e[s].bind(e):function(){},l=new(i||t)(e,n,c,o.tooltip,o.image);return void 0!=o.defaultValue&&buttonToggle.buttonFile(o.defaultValue),l}return e}),define("fore/buttonFile/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/buttonToggle/class",["core/primitives"],function(t){"use strict";function e(e,n,o,i,r){t.ButtonToggle.call(this,e,n,o,i,r)}return e.prototype=Object.create(t.ButtonToggle.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.element.toggleClass("button-active",["active"].includes(e)),this.element.toggleClass("button-inactive",["inactive"].includes(e)),t.ButtonToggle.prototype.setActiveStatus.call(this,e)},e}),define("fore/buttonToggle/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=n.split("/"),s=r[r.length-1],c="function"==typeof o.handler?o.handler.bind(e):e[s]?e[s].bind(e):function(){},l=new(i||t)(e,n,c,o.tooltip,o.image);return void 0!=o.defaultValue&&l.setValue(o.defaultValue),l.toggle(o.defaultState),l}return e}),define("fore/buttonToggle/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/control/class",["core/Control"],function(t){"use strict";return t}),define("fore/control/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n,o.template)}return e}),define("fore/control/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/Panel",["./Control"],function(t){"use strict";function e(e,n,o){t.call(this,e,n,o)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.on=function(t,e,n){return["control:focusin"].includes(e)&&t.context===this?(t!=this.activeElement&&this.setActiveElement(t),this.send(e,n).activeElement.focus(),!1):["control:tabulate"].includes(e)&&t.context===this?(this.nextControl(t,1),!1):["control:changed","field:input"].includes(e)&&t.context===this?(this.calculate(),!1):void 0},e.prototype.addContent=function(t){return t.forEach(function(t){var e=t.builder(this);e&&(this.controls[t.name]=e,this.controls[t.name].tabindex=parseInt(this.controls[t.name].element.attr("tabindex")))}.bind(this)),this.tabLoop=Object.keys(this.controls).filter(function(t){return this.controls[t].tabindex}.bind(this)).sort(function(t,e){var n=this.controls[t].tabindex-this.controls[e].tabindex;return n||console.error("More than one element with tabindex="+tabindex+" was found as a child of",this),n}.bind(this)).map(function(t,e){return this.controls[t].setItemId(this,e),this.controls[t]}.bind(this)),this},e.prototype.setContent=function(t){return this.controls={},this.tabLoop=[],this.addContent(t)},e.prototype.nextControl=function(t,e){var n=function(t){var n=t.itemId+e;return 1===e&&n>this.tabLoop.length-1&&(n=0),-1===e&&n<0&&(n=this.tabLoop.length-1),this.tabLoop[n]}.bind(this);if(this.tabLoop.length>1&&this.tabLoop.includes(t))for(var o=n(t).focus();!o.isActive&&o!=t;)o=n(o).focus();else"function"==typeof this.context.nextControl&&this.context.nextControl(this,e)},e.prototype.getDefaultActiveElement=function(){return this.tabLoop.find(function(t){return t.isVisible()})},e.prototype.setActiveElement=function(t){return this.tabLoop.forEach(function(e){e!=t&&e.setActiveStatus("none")}),this.activeElement=t},e.prototype.calculate=function(){for(var t in this.controls)"function"==typeof this.controls[t].calculator&&this.controls[t].setValue(this.controls[t].getValue());return this},e}),define("core/Form",["./Panel"],function(t){"use strict";function e(e,n,o){t.call(this,e,n,o)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._forEach_=function(t){for(var e in this.attributes)if(this.controls[e]){var n=t(e);if(void 0!=n)return n}},e.prototype.fillContent=function(t){this.attributes=Object.assign({},t);for(var e in this.controls)void 0!=this.attributes[e]&&this.controls[e].setValue(this.attributes[e]);return this.submit()},e.prototype.isChanged=function(){return this._forEach_(function(t){if(this.attributes[t]!=this.controls[t].getValue())return!0}.bind(this))||!1},e.prototype.submit=function(t){return this._forEach_(function(t){this.attributes[t]=this.controls[t].getValue()}.bind(this)),"function"==typeof t&&t(this),this},e.prototype.cancel=function(t){return this.fillContent(this.attributes),"function"==typeof t&&t(this),this},e}),define("core/Entry",["./Form"],function(t){"use strict";function e(e,n){t.call(this,e,"*/"+e.container.attr("name"),"create:"+n)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n,o){return["control:tabulate"].includes(n)&&e.context===this?(this.root.send(n,o),!1):["control:into","control:updown","control:escape"].includes(n)&&e.context===this?(this.send(n,o),!1):t.prototype.on.call(this,e,n,o)},e.prototype.getText=function(){return this.tabLoop[0].getValue()},e.prototype.getValue=function(){return this.attributes.id},e}),define("fore/entry/class",["core/Entry"],function(t){"use strict";function e(e,n){t.call(this,e,n)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.contextmenuItems.forEach(function(t){t.disabled=!["active","inactive"].includes(e)}),t.prototype.setActiveStatus.call(this,e)},e}),define("fore/entry/builder",["./class"],function(t){"use strict";function e(e,n,o){return new(o||t)(e,n.template).setContent(n.controls).fillContent(n.attributes).setContextmenu(n.contextmenuItems)}return e}),define("fore/entry/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/field/class",["core/primitives"],function(t){"use strict";function e(e,n,o,i,r){t.Field.call(this,e,n,o,i,r)}return e.prototype=Object.create(t.Field.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.element.toggleClass("control-active",["active"].includes(e)),t.Field.prototype.setActiveStatus.call(this,e)},e.prototype.setLabel=function(e,n){return n&&(this.label=new t.Label(this.context,e+"-label",n)),this},e}),define("fore/field/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=new(i||t)(e,n,o.formatter,o.calculator,o.inputMaskBuilder).setLabel(n,o.text);return void 0!=o.defaultValue&&r.setValue(o.defaultValue),r}return e}),define("fore/field/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/form/class",["core/Form"],function(t){"use strict";return t}),define("fore/form/builder",["./class","../button/builder","i18n!nls/root"],function(t,e,n){"use strict";function o(o,i,r,s){return r.controls=r.controls.concat(["submit"].map(function(t){var o={defaultValue:n.form[t],handler:function(t){return t.context.send("execute","destroy"),t.context.submit(r.onSubmit)}};return{name:t,builder:function(n){return e(n,"*/"+t,o||{})}}})),new(s||t)(o,i,r.template).setContent(r.controls).fillContent(r.attributes).send("setHeader",r.header||"")}return o}),define("fore/form/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/label/class",["core/primitives"],function(t){"use strict";return t.Label}),define("fore/label/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n,o.text)}return e}),define("fore/label/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/List",["./Control"],function(t){"use strict";function e(e,n,o,i,r){t.call(this,e,n,o),this.container=this.element.find('[name="'+i+'"]'),this.entryBuilder=r,this.collection=[],this.sortFields=[]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._clearCollection_=function(){this.collection=[],this.container.empty()},e.prototype.on=function(t,e,n){if(["control:focusin"].includes(e)&&t.root===this)return t!=this.activeElement&&this.setActiveElement(t),this.send(e,n).activeElement.focus(),!1;if(["control:tabulate"].includes(e))return this.send(e,n),!1;if(["control:updown"].includes(e)&&t.root===this&&!n.shiftKey){var o=38===n.which?-1:1,i=this.nextEntry(t,o),r=t.activeElement?t.activeElement.itemId:void 0,s=void 0!=r&&i.tabLoop[r].isVisible()?i.tabLoop[r]:i.getDefaultActiveElement();return i.focus(s),!1}},e.prototype.comparator=function(t,e){var n=0;for(var o in this.sortFields){var i=this.sortFields[o],r="desc"===i.sortOrder?-1:1,s=t.controls[i.name],c=s.input?s.input.element.val():s.getValue(),l=e.controls[i.name],a=l.input?l.input.element.val():l.getValue();if(0!=(n="function"==typeof i.comparator?r*i.comparator(c,a):0))break}return 0===n?t.getValue()-e.getValue():n},e.prototype.firstEntry=function(){return this.collection&&this.collection.length?this.collection[0]:null},e.prototype.lastEntry=function(){return this.collection&&this.collection.length?this.collection[this.collection.length-1]:null},e.prototype.nextEntry=function(t,e){return this.collection[t.itemId+e]||this.collection[1===e?0:this.collection.length-1]},e.prototype.getDefaultActiveElement=function(){return this.firstEntry()},e.prototype.setActiveElement=function(t){return this.activeElement&&this.activeElement!=t&&this.activeElement.setActiveStatus("none"),t&&!t.isActive&&t.setActiveStatus("inactive"),this.activeElement=t,this.send("control:changed"),this.activeElement},e.prototype.sort=function(t){return this.sortFields=t.concat(this.sortFields.filter(function(e){return!t.includes(e)})),this.collection.sort(this.comparator.bind(this)).forEach(function(t,e){t.setItemId(this,e),t.element.appendTo(this.container)}.bind(this)),this.activeElement&&this.activeElement.focus(),this},e.prototype.addContent=function(t){var e=t.map(function(t){return this.entryBuilder(this,t)}.bind(this));return this.collection=this.collection.concat(e),this.sort(this.sortFields),e},e.prototype.setContent=function(t){return this._clearCollection_(),this.addContent(t),this.send("content:set")},e.prototype.crud=function(t,e){var n="";n=t<0?"content:create":e?"content:edit":"content:remove";var o=this.collection.find(function(e){return e.attributes.id===Math.abs(t)}),i=[],r=this.collection.slice();this.collection=[],r.forEach(function(e){e.attributes.id===t?(i.push(e),e.element.remove()):(this.collection.push(e),e.setItemId(this,this.collection.length-1))}.bind(this));var s=o?this.collection[o.itemId]||this.collection[o.itemId-1]:null;return e&&e.length&&(s=this.addContent(e)[0]),this.send(n),s},e.prototype.forEach=function(t){for(var e=0;e<this.collection.length;e++){var n=t(this.collection[e]);if(n)return n}},e.prototype.getEntryById=function(t){return this.collection&&t?this.collection.find(function(e){return e.getValue()===t}):void 0},e.prototype.getData=function(){return this.collection.map(function(t){return t.attributes})},e.prototype.setValue=function(t){return this.setActiveElement(this.getEntryById(t)),this},e.prototype.getValue=function(){return this.activeElement?this.activeElement.getValue():null},e}),define("fore/list/class",["core/List"],function(t){"use strict";function e(e,n,o,i,r,s){t.call(this,e,n,o,i,r),s&&(this.dao=s(this.application)),this.parameters=""}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.getDefaultActiveElement=function(){var t=this.firstEntry();if(t)return t;this.execute(function(t){this.firstEntry().focus()}.bind(this))},e.prototype.create=function(t,e){var n=function(n){var o={attributes:Object.assign(this.dao.parse(e),e||{},{id:null}),onSubmit:function(t){this.dao=this.dao.create(t.attributes,this.parameters).execute(function(t){var n=this.crud(-e.id,t);n&&n.focus()}.bind(this))}.bind(this)};return t(n,"*/content",o)}.bind(this);this.application.addWindow(n,!0)},e.prototype.copy=function(t,e){var n=function(n){var o={attributes:Object.assign({},e,{id:null}),onSubmit:function(t){this.dao=this.dao.create(t.attributes,this.parameters).execute(function(t){var n=this.crud(-e.id,t);n&&n.focus()}.bind(this))}.bind(this)};return t(n,"*/content",o)}.bind(this);this.application.addWindow(n,!0)},e.prototype.edit=function(t,e){var n=function(n){var o={attributes:Object.assign({},e),onSubmit:function(t){this.dao=this.dao.edit(t.attributes,this.parameters).execute(function(t){var n=this.crud(e.id,t);n&&n.focus()}.bind(this))}.bind(this)};return t(n,"*/content",o)}.bind(this);this.application.addWindow(n,!0)},e.prototype.remove=function(t,e,n,o){var i=function(i){var r={attributes:Object.assign({},e),onSubmit:function(t){this.dao=this.dao.remove(e).execute(function(t){var n=this.crud(e.id);n&&n.focus()}.bind(this))}.bind(this),onNo:function(t){},header:n,message:o};return t(i,"*/content",r)}.bind(this);this.application.addWindow(i,!0)},e.prototype.fetchContent=function(t,e){return this.parameters=e,this.dao=this.dao[t](this.parameters).execute(function(t){this.setActiveElement(void 0),this.setContent(t)}.bind(this)),this},e.prototype.execute=function(t){return this.dao?this.dao=this.dao.execute(function(e){t.call(this,this.getData())}.bind(this)):t.call(this,this.getData()),this},e}),define("fore/list/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=new(i||t)(e,n,o.template,o.container,o.entryBuilder,o.daoBuilder);return r.sortFields=o.sortFields,o.daoBuilder&&"none"!=o.method&&r.fetchContent(o.method||"getData",o.filter||""),r}return e}),define("fore/list/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/panel/class",["core/Panel"],function(t){"use strict";return t}),define("fore/panel/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n,o.template).setContent(o.controls).send("setHeader",o.header||"")}return e}),define("fore/panel/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/radio/class",["core/primitives"],function(t){"use strict";function e(e,n){t.Radio.call(this,e,n)}return e.prototype=Object.create(t.Radio.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.element.toggleClass("control-active",["active"].includes(e)),t.Radio.prototype.setActiveStatus.call(this,e)},e.prototype.setLabels=function(e,n){return e&&(this.label=new t.Label(this.context,this.name+"-label",e)),this.radios.each(function(e,o){o.label=new t.Label(this,"*/"+o.value+"-label",n[e])}.bind(this)),this},e}),define("fore/radio/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n).setLabels(o.text,o.labels)}return e}),define("fore/radio/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/Select",["./Control"],function(t){"use strict";function e(){}function n(e,n){t.call(this,e,n),$('<div name="content"></div>').appendTo(this.element).css({height:"100%",overflow:"auto"}),this.element.on({mousedown:function(t){t.target===this&&t.preventDefault()}})}return e.prototype.storeBuilders=function(t,e){return this.builders={},this.builders.list=t,this.builders.tree=e,this},e.prototype.getBuilder=function(t){return this.builders[t]},e.prototype.storeData=function(t,e){return this.data=t,this.dataProcessor=e,this},e.prototype.getData=function(t){return this.dataProcessor(this.data,t)},n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.on=function(t,e,n){return["control:focusin"].includes(e)?(this.send(e,n),this.content.focus(),!1):["control:tabulate"].includes(e)?(this.send(e,n),!1):["control:changed"].includes(e)&&t===this.content?(this.value=this.content.getValue(),this.send(e,n),!1):void 0},n.prototype.setRepository=function(){return this.repository=new e,this},n.prototype.destroyContent=function(){return this.content&&(this.content.element.empty(),delete this.content),this},n.prototype.buildContent=function(t){return this.destroyContent(),this.content=t(this,"content"),this},n.prototype.setContent=function(t){return this.content.setContent(t),this},n.prototype.getContent=function(){return this.content},n.prototype.getEntry=function(){return this.content.activeElement},n.prototype.setValue=function(t){return this.value=t,this.content.setValue(this.value),this},n.prototype.getValue=function(){return this.value},n}),define("fore/select/class",["core/Select","core/primitives"],function(t,e){"use strict";function n(e,n,o){t.call(this,e,n)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.setActiveStatus=function(e){return this.element.toggleClass("control-active",["active"].includes(e)),t.prototype.setActiveStatus.call(this,e)},n.prototype.setContent=function(e){return"function"==typeof e.execute?this.dao=e.execute(function(e){t.prototype.setContent.call(this,e),this.getValue()&&this.setValue(this.value)}.bind(this)):t.prototype.setContent.call(this,e),this},n.prototype.execute=function(t){return this.dao?this.dao=this.dao.execute(function(e){t.call(this,this.content.getData())}.bind(this)):t.call(this,this.content.getData()),this},n.prototype.setValue=function(e){return this.content&&this.content.collection?t.prototype.setValue.call(this,e):this.value=e,this},n.prototype.setLabel=function(t){return t&&(this.label=new e.Label(this.context,"*/"+this.name+"-label",t)),this},n}),define("objects/selectList/class",["core/List"],function(t){"use strict";return t}),define("text!objects/selectList/template.htpl",[],function(){return'<div name="selectListCollection"></div>'}),define("objects/selectList/entry/class",["core/Entry"],function(t){"use strict";function e(e,n){t.call(this,e,n)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.controls.textId.element.toggleClass("button-active",["active"].includes(e)),this.controls.textId.element.toggleClass("button-inactive",["inactive"].includes(e)),t.prototype.setActiveStatus.call(this,e)},e}),define("text!objects/selectList/entry/template.htpl",[],function(){return'<div name="entry">\r\n\t<button class="button button-list" tabindex=1 name="textId"></button>\r\n</div>'}),define("objects/selectList/entry/builder",["./class","text!./template.htpl","core/primitives"],function(t,e,n){"use strict";function o(o,i){var r=[].concat(["textId"].map(function(t){return{name:t,builder:function(e){return new n.Button(e,"*/"+t,function(t){t.context.focus().send("entry:mousedown",i.handler)})}}}));return new t(o,e).setContent(r).fillContent(i)}return o}),define("objects/selectList/builder",["./class","text!./template.htpl","./entry/builder","i18n!nls/root"],function(t,e,n,o){"use strict";function i(i,r,s,c){function l(t,e){var o=Object.assign({},e,{textId:e[s]});return n(t,o)}var a=[].concat(["textId"].map(function(t){return{name:t,comparator:o.localeCompare.bind(null,"string"),sortOrder:c?"desc":""}}));return new t(i,r,e,"selectListCollection",l).sort([a[0]])}return i}),define("core/TreeBranch",["./Control"],function(t){"use strict";function e(e,n,o,i,r,s){t.call(this,e,n,"create:"+o),this.collectionName=n,this.template=o,this.container=this.element.find('[name="'+i+'"]'),this.entryBuilder=r,this.branchBuilder=s}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setState=function(t){if(this.collection.length){this.state=t||"collapsed","collapsed"===this.state&&this.element.has(document.activeElement).length&&this.entry.focus();for(var e in this.collection)"expanded"===this.state?this.collection[e].element.show():this.collection[e].element.hide()}else this.state="none"},e.prototype.addBranch=function(t,e){var n=this.branchBuilder?this.branchBuilder(this):new this.constructor(this,this.collectionName,this.template,this.container.attr("name"),this.entryBuilder);return n.buildContent(t.node,t.collection,e,t.state),n},e.prototype.buildContent=function(t,n,o,i){var r=this.context instanceof e?this.context.entry.root:this;return this.entry=this.entryBuilder(this,t).setItemId(r,o),this.entry.parent=this.context instanceof e?this.context.entry:null,this.collection=[],n.forEach(function(t,e){this.collection[e]=this.addBranch(t,e)}.bind(this)),this.setState(i),this},e.prototype.forEach=function(t){function e(n){for(var o in n.collection){var i=t(n.collection[o].entry)||e(n.collection[o]);if(i)return i}}return this.entry?t(this.entry)||e(this):null},e.prototype.getEntry=function(t){function e(t,n){if(n===t.entry.attributes.code)return t;var o=t.collection.find(function(t){return 0===n.search(t.entry.attributes.code)});return o?e(o,n):null}return e(this,t).entry},e.prototype.getEntryById=function(t){return this.forEach(function(e){if(parseInt(e.getValue())===t)return e})},e.prototype.forEachUp=function(t){function n(o){if(o.context&&o.context instanceof e)return t(o.context.entry)||n(o.context)}return n(this)},e.prototype.expandDown=function(){return this.forEach(function(t){t.context.setState("expanded")}),this},e.prototype.collapseDown=function(){return this.forEach(function(t){t.context.setState("collapsed")}),this},e.prototype.expandUp=function(){return this.forEachUp(function(t){t.context.setState("expanded")}),this},e.prototype.collapseUp=function(){return this.forEachUp(function(t){t.contex.setState("collapsed")}),this},e.prototype.mixStates=function(t,n){t.state=n[t.node.id]||"collapsed",t.collection.forEach(function(t){e.prototype.mixStates(t,n)})},e.prototype.refresh=function(t){var e=this.entry.itemId,n={};return this.forEach(function(t){n[t.getValue()]=t.context.state}),this.mixStates(t,n),this.entry.element.remove(),delete this.entry,this.collection.forEach(function(t){t.element.remove()}),this.collection=[],this.buildContent(t.node,t.collection,e,t.state)},e}),define("core/Tree",["./TreeBranch"],function(t){"use strict";function e(t){this.node=t.node,this.collection=t.collection}function n(e,n,o,i,r,s){t.call(this,e,n,o,i,r,s)}return e.prototype.find=function(t){function e(n){if(t(n.node))return n.node;for(var o in n.collection){var i=e(n.collection[o]);if(i)return i}}return e(this)},n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.on=function(t,e,n){if(["control:focusin"].includes(e)&&t.root===this)return t!=this.activeElement&&this.setActiveElement(t),this.send(e,n).activeElement.focus(),!1;if(["control:tabulate"].includes(e))return this.send(e,n),!1;if(["control:into"].includes(e)&&t.root===this)return t.context.setState("expanded"===t.context.state?"collapsed":"expanded"),!1;if(["control:updown"].includes(e)&&t.root===this&&!n.shiftKey){var o=38===n.which?-1:1,i=i=this.nextEntry(t,o),r=t.activeElement?t.activeElement.itemId:null,s=void 0!=r&&i.tabLoop[r].isVisible()?i.tabLoop[r]:i.getDefaultActiveElement();return i.focus(s),!1}return["branch:collapse"].includes(e)?(this.activeElement&&t.context.getEntry(this.activeElement.attributes.code)&&t.focus(),!1):void 0},n.prototype.firstEntry=function(){return this.entry},n.prototype.nextEntry=function(t,e){return 1===e?function(t){function e(t){return t.parent?t.parent.context.collection[t.itemId+1]?t.parent.context.collection[t.itemId+1].entry:e(t.parent):t}return"expanded"===t.context.state?t.context.collection[0].entry||t:e(t)}(t):function(t){function e(t){return"expanded"===t.context.state?e(t.context.collection[t.context.collection.length-1].entry):t}if(t.parent){var n=t.parent.context.collection[t.itemId-1];return n?"expanded"===n.entry.context.state?e(n.entry):n.entry:t.parent}return e(t)}(t)},n.prototype.getDefaultActiveElement=function(){return this.entry},n.prototype.setActiveElement=function(t){return this.activeElement&&this.activeElement!=t&&this.activeElement.setActiveStatus("none"),t&&!t.isActive&&t.setActiveStatus("inactive"),this.activeElement=t,this.send("control:changed"),this.activeElement},n.prototype.setContent=function(t){return t.state="expanded",this.buildContent(t.node,t.collection,1),this.send("content:set")},n.prototype.create=function(t){var e=this.getEntry(t.node.code).context.refresh(t);e.setState("expanded"),e.collection[e.collection.length-1].entry.focus(),this.send("content:create")},n.prototype.edit=function(t){this.getEntry(t.node.code).fillContent(t.node);this.send("content:edit")},n.prototype.moveBranch=function(t,e){var n=(this.getEntry(t.node.code).context.refresh(t),this.getEntryById(e));n.context.expandUp(),n.focus(),this.send("content:moveBranch")},n.prototype.removeBranch=function(t){this.getEntry(t.node.code).context.refresh(t).entry.focus(),this.send("content:removeBranch")},n.prototype.getData=function(){function t(n){return new e({
node:n.entry.attributes,collection:n.collection.map(function(e){return t(e)})})}return t(this)},n.prototype.setValue=function(t){return this.setActiveElement(this.getEntryById(t)),this.activeElement&&this.activeElement.context.expandUp(),this},n.prototype.getValue=function(){return this.activeElement?this.activeElement.getValue():null},n}),define("objects/selectTree/class",["core/Tree"],function(t){"use strict";function e(e,n,o,i,r,s){t.call(this,e,n,o,i,r,s)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setState=function(e){t.prototype.setState.call(this,"expanded")},e}),define("text!objects/selectTree/template.htpl",[],function(){return'<div style="display: flex;" name="node"></div>\r\n<div style="padding-left: 11px;" name="selectTreeCollection"></div>'}),define("objects/selectTree/branch/entry/class",["core/Entry"],function(t){"use strict";function e(e,n){t.call(this,e,n)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.controls.textId.element.toggleClass("button-active",["active"].includes(e)),this.controls.textId.element.toggleClass("button-inactive",["inactive"].includes(e)),t.prototype.setActiveStatus.call(this,e)},e}),define("text!objects/selectTree/branch/entry/template.htpl",[],function(){return'<div name="entry">\r\n\t<button class="button button-tree" tabindex=1 name="textId"></button>\r\n</div>'}),define("objects/selectTree/branch/entry/builder",["./class","text!./template.htpl","core/primitives"],function(t,e,n){"use strict";function o(o,i){var r=[].concat(["textId"].map(function(t){return{name:t,builder:function(e){return new n.Button(e,"*/"+t,function(t){t.context.focus().send("entry:mousedown",i.handler)})}}}));return new t(o,e).setContent(r).fillContent(i)}return o}),define("objects/selectTree/branch/class",["core/TreeBranch","core/primitives","icons/dir"],function(t,e,n){"use strict";function o(o,i,r,s,c){t.call(this,o,i,r,s,c),this.btnExpand=new e.Button(this,"*/expand",this.setState.bind(this,"expanded"),"",n.expand),this.btnCollapse=new e.Button(this,"*/collapse",this.setState.bind(this,"collapsed"),"",n.collapse)}return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.setState=function(e){t.prototype.setState.call(this,e),this.btnExpand.setVisibility("expanded"!=this.state&&"none"!=this.state),this.btnCollapse.setVisibility("collapsed"!=this.state&&"none"!=this.state)},o}),define("text!objects/selectTree/branch/template.htpl",[],function(){return'<div name="branch">\r\n\t<div style="display: flex;" name="node">\r\n\t\t<div class="button-expcol" style="flex: 0 0 9px;">\r\n\t\t\t<button name="expand"></button>\r\n\t\t\t<button name="collapse"></button>\r\n\t\t</div>\r\n\t</div>\r\n\t<div style="padding-left: 20px;" name="selectTreeCollection"></div>\r\n</div>'}),define("objects/selectTree/branch/builder",["./class","text!./template.htpl","./entry/builder"],function(t,e,n){"use strict";function o(o){return new t(o,"selectTreeCollection",e,"node",n)}return o}),define("objects/selectTree/builder",["./class","text!./template.htpl","./branch/entry/builder","./branch/builder"],function(t,e,n,o){"use strict";function i(i,r,s){return new t(i,r,e,"node",n,o)}return i}),define("objects/dir",["./selectList/builder","./selectTree/builder"],function(t,e){"use strict";return{selectList:t,selectTree:e}}),define("fore/select/builder",["./class","objects/dir"],function(t,e){"use strict";function n(n,o,i,r){function s(t,n){return e.selectList(t,n,i.textId||"textId","desc"===i.sortOrder)}function c(t,n){return e.selectTree(t,n,i.textId||"textId")}var l=new(r||t)(n,o,i.dataProcessor).setRepository().setLabel(i.text);return l.repository.storeBuilders(s,c),void 0!=i.typeOfContent&&l.buildContent("tree"===i.typeOfContent?c:s),i.data&&(l.getContent()&&void 0===i.dataProcessor?l.setContent(i.data):l.repository.storeData(i.data,i.dataProcessor)),void 0!=i.defaultValue&&l.setValue(i.defaultValue),l}return n}),define("fore/select/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/SelectDropdown",["./Control","./Select","./primitives","./Backdrop"],function(t,e,n,o){"use strict";function i(e,n){t.call(this,e,n),this.ondropfocus(this.setSelectionRange.bind(this))}function r(t,n){e.call(this,t,n),this.hide()}function s(e,n){t.call(this,e,n),this.element.css({position:"relative"});this.element.append('<input name="input">'),this.input=new i(this,"input"),this.input.element.css({position:"absolute",top:0,left:0,"box-sizing":"border-box",height:"100%",width:"100%","box-shadow":"inherit",border:"inherit","border-color":"rgb(255, 255, 255, 0)",padding:"inherit"}).css({"padding-right":"20px"}).on({input:function(t){if(t.originalEvent.data){var e=this.input.element.val(),n=this._getEntryByText_(e);n&&this._setValueByEntry_(n).input.element[0].setSelectionRange(e.length,n.getText().length)}else this.dropdown.setValue(null).focus(),this.value=null;this.send("control:changed")}.bind(this)});var o={"background-color":"transparent",position:"absolute",top:0,"box-sizing":"border-box",height:"100%","text-align":"center","line-height":this.element.css("height"),color:"initial"};this.element.append('<div name="button"></div>'),this.btn=new c(this,"button",function(){this.send("control:click")}).setValue("&#x25BC"),this.btn.element.css(Object.assign({},o,{right:0,width:"20px","font-size":"10px"})),this.element.append('<div name="clear"></div>'),this.clear=new c(this,"clear",function(){this.send("control:click")}).setValue("&#x25BC"),this.clear.hidden=!0,this.clear.element.css(Object.assign({},o,{right:"20px",width:NaN,"font-size":"8px"})).hide(),this.element.append('<div name="dropdown"></div>'),this.dropdown=new r(this,"dropdown"),this.dropdown.element.css({"background-color":"white",position:"absolute",top:this.element.css("height"),left:"calc(0px - "+this.element.css("border-left-width")+")","box-sizing":"border-box","max-height":"200px","min-width":"calc(100% + "+this.element.css("border-left-width")+" + "+this.element.css("border-right-width")+")",border:"1px solid #aaa",overflow:"auto",color:"initial"})}var c=n.Button;return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.setSelectionRange=function(){"function"==typeof this.element[0].setSelectionRange&&this.element[0].setSelectionRange(0,this.element.val().length)},r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.on=function(t,n,o){return(!["control:changed"].includes(n)||t!==this.content)&&(["entry:mousedown"].includes(n)?(this.value=this.content.getValue(),this.send("control:changed"),!1):e.prototype.on.call(this,t,n,o))},r.prototype.show=function(){this.element.show(),this.visible=!0},r.prototype.hide=function(){this.element.hide(),this.visible=!1},s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype._show_=function(){this.dropdown.content&&(this.backdrop=new o(this,function(t,e){t._hide_()}).setZIndex(999),this.dropdown.show(),this.dropdown.content.focus())},s.prototype._hide_=function(){this.dropdown.isVisible()&&(this.backdrop.destroy(),delete this.backdrop,this.dropdown.hide())},s.prototype._getEntryByText_=function(t){return t?this.dropdown.content.forEach(function(e){if(e.getText().toUpperCase().startsWith(t.toUpperCase()))return this.dropdown.setValue(e.getValue()),e}.bind(this)):this.dropdown.setValue(null)},s.prototype._setValueByEntry_=function(t){return this.value=this.dropdown.getValue(),this.input.element.val(t?t.getText():""),this},s.prototype.on=function(t,e,n){if(["control:focusin","control:tabulate","control:updown","control:leftright"].includes(e)&&t===this.input)return this.send(e,n),!1;if(["control:into"].includes(e)&&t===this.input)return this._show_(),!1;if(["control:click"].includes(e)&&t===this.btn)return this.input.focus(),this.dropdown.visible?(this.setValue(this.value),this._hide_()):this._show_(),!1;if(["control:click"].includes(e)&&t===this.clear)return this.input.focus(),this.setValue(),this.send("control:changed"),!1;if(["control:updown"].includes(e)&&t===this.input&&this.dropdown.visible){var o=this.dropdown.content.firstEntry();return o&&o.focus(),!1}return["control:escape"].includes(e)?(this.input.focus(),this.setValue(this.value),this._hide_(),!1):["control:changed"].includes(e)&&t===this.dropdown?(this.input.focus(),this._setValueByEntry_(t.getEntry()),this._hide_(),this.send("control:changed"),!1):void 0},s.prototype.onfocus=function(t){return this.input._onfocus.push(t),this},s.prototype.ondropfocus=function(t){return this.input._ondropfocus.push(t),this},s.prototype.getDefaultActiveElement=function(){return this.dropdown.visible?this.dropdown:this.input},s.prototype.showClear=function(){this.clear.hidden=!1,this.clear.element.show();var t=this.btn.element.css("width");this.input.element.css({width:"100%","padding-right":"calc(1.5 * "+t+")"})},s.prototype.disabled=function(t){return t?(this.btn.element.hide(),this.clear.element.hide()):(this.btn.element.show(),this.clear.hidden||this.clear.element.show()),this.input.element.prop("disabled",t),this},s.prototype.setRepository=function(){return this.dropdown.setRepository.call(this),this},s.prototype.destroyContent=function(){return this.dropdown.destroyContent(),this},s.prototype.buildContent=function(t){return this.dropdown.buildContent(t),this},s.prototype.setContent=function(t){return this.dropdown.setContent(t),this},s.prototype.getContent=function(){return this.dropdown.getContent()},s.prototype.getEntry=function(){return this.dropdown.getEntry()},s.prototype.getText=function(){return this.input.element.val()},s.prototype.setValue=function(t){this.value=this.dropdown.setValue(t).getValue();var e=this.dropdown.getEntry();return this.input.element.val(e?e.getText():""),this},s.prototype.getValue=function(){return this.value},s}),define("fore/selectDropdown/class",["core/SelectDropdown","core/primitives"],function(t,e){"use strict";function n(e,n,o){t.call(this,e,n)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.setActiveStatus=function(e){return this.input.element.toggleClass("control-active",["active"].includes(e)),t.prototype.setActiveStatus.call(this,e)},n.prototype.setContent=function(e){return"function"==typeof e.execute?this.dao=e.execute(function(e){t.prototype.setContent.call(this,e),this.getValue()&&(this.setValue(this.value),this.isActive&&this.input.setSelectionRange())}.bind(this)):t.prototype.setContent.call(this,e),this},n.prototype.execute=function(t){return this.dao?this.dao=this.dao.execute(function(e){t.call(this,this.dropdown.content.getData())}.bind(this)):t.call(this,this.dropdown.content.getData()),this},n.prototype.setValue=function(e){return this.dropdown.content&&this.dropdown.content.collection?t.prototype.setValue.call(this,e):this.value=e,this},n.prototype.setLabel=function(t){return t&&(this.label=new e.Label(this.context,"*/"+this.name+"-label",t)),this},n}),define("fore/selectDropdown/builder",["./class","objects/dir"],function(t,e){"use strict";function n(n,o,i,r){function s(t,n){return e.selectList(t,n,i.textId||"textId","desc"===i.sortOrder)}function c(t,n){return e.selectTree(t,n,i.textId||"textId")}var l=new(r||t)(n,o,i.dataProcessor).setRepository().setLabel(i.text);return l.repository.storeBuilders(s,c),void 0!=i.typeOfContent&&l.buildContent("tree"===i.typeOfContent?c:s),i.data&&(l.getContent()&&void 0===i.dataProcessor?l.setContent(i.data):l.repository.storeData(i.data,i.dataProcessor)),void 0!=i.defaultValue&&l.setValue(i.defaultValue),!0===i.withClear&&l.showClear(),l}return n}),define("fore/selectDropdown/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/Table",["./Control"],function(t){"use strict";function e(t,e,n){for(var o=[],i=t.indexOf(e),r=t.indexOf(n),s=i<r?i:r,c=i<r?r:i,l=s;l<=c;l++)o.push(t[l]);return o}function n(e,n,o,i,r,s){t.call(this,e,n,o),this.header=i(this),this.fields=this.header.fields,s&&(this.footer=s(this)),this.content=r(this),this._adjustTemplate_(),this._setVisibility_(),this.selectCollection=[],this.selectFields=[],this.selection=[],this.element.on({keydown:function(t){[65].includes(t.which)&&t.ctrlKey&&(t.preventDefault(),t.stopPropagation(),this.header.handle.send("handle:mousedown",t))}.bind(this)})}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._adjustTemplate_=function(t){var e=function(t){var e=$("<div>").css({flex:"1 1 100%",display:"flex"}).append(t.element.contents());t.element.empty().append(e);var n=$("<div>").appendTo(this.content.element),o=t.element.innerWidth()-n.innerWidth();this.fields[0].element.clone().html("").css({padding:"0px","border-right":"none",flex:"0 0 "+o+"px"}).appendTo(t.element),n.remove()}.bind(this);if(this.header.element.css({display:"flex"}),this.footer&&this.footer.element.css({display:"flex"}),"scroll"===this.content.element.css("overflow-y"))e(this.header),this.footer&&e(this.footer);else{this.element.wrap("<div>").parent().css({"border-top":this.element.css("border-top"),"border-right":this.element.css("border-right"),"border-bottom":this.element.css("border-bottom"),"border-left":this.element.css("border-left")});this.element.css({"margin-right":"-"+this.element.css("border-right-width"),"margin-bottom":"-"+this.element.css("border-bottom-width"),border:"none"})}n.prototype.getData=function(){return this.content.getData()}},n.prototype._getAllRows_=function(){var t=[];return this.content.forEach(function(e){t.push(e)}),t},n.prototype._setSelection_=function(t,n){this.deselect(),this.selectCollection=[],this.selectFields=[],this.selection=[];var o=this._getAllRows_();if(o.length&&t&&n){var i=!1,r=!1;t.context===this.header?(this.selectCollection=o,this.selectFields=e(this.fields,t,n),r=!0,i=!(!this.selectFields.length||this.selectFields.length!==this.fields.length)):(this.selectCollection=e(o,t,n),this.selectFields=this.fields,i=!0,r=!(!this.selectCollection.length||this.selectCollection.length!==o.length));var s=(r?[this.header]:[]).concat(this.selectCollection).concat(r&&this.footer?[this.footer]:[]);this.selection=s.map(function(t){return(i?[t.handle]:[]).concat(this.selectFields.map(function(e){return t===this.header?e:t.controls[e.name]}.bind(this)))}.bind(this)),this.select()}},n.prototype._onUpDown_=function(t,e){var n=38===e.which?-1:1;this.initControl=this.content.activeElement;var o=t.itemId>this.selectCollection[0].itemId?0:this.selectCollection.length-1;this.currentControl=this.content.nextEntry(this.selectCollection[o],n),this._setSelection_(this.initControl,this.currentControl)},n.prototype._onMoveOverRows_=function(t){var e=this.currentControl.element.offset().top,n=e+this.currentControl.element.outerHeight();if(t.pageY<e){var o=this.content.nextEntry(this.currentControl,-1);o.itemId<this.currentControl.itemId&&(this.currentControl=o,this._setSelection_(this.initControl,this.currentControl))}if(t.pageY>n){var o=this.content.nextEntry(this.currentControl,1);o.itemId>this.currentControl.itemId&&(this.currentControl=o,this._setSelection_(this.initControl,this.currentControl))}},n.prototype._onMoveOverColumns_=function(t){var e=this.currentControl.element.offset().left,n=e+this.currentControl.element.outerWidth();if(t.pageX<e){var o=this.fields[this.currentControl.itemId-1];if(o){for(;!o.element.offset().left;)o=this.fields[o.itemId-1];this.currentControl=o,this._setSelection_(this.initControl,this.currentControl)}}if(t.pageX>n){var o=this.fields[this.currentControl.itemId+1];if(o){for(;!o.element.offset().left;)o=this.fields[o.itemId+1];this.currentControl=o,this._setSelection_(this.initControl,this.currentControl)}}},n.prototype._onMouseDown_=function(t,e,n){this.initControl=t,e.shiftKey&&(t.root===this.header&&this.selectFields.length&&(this.initControl=this.selectFields[t.itemId>this.selectFields[0].itemId?0:this.selectFields.length-1]),t.root===this.content&&this.selectCollection.length&&(this.initControl=this.selectCollection[t.itemId>this.selectCollection[0].itemId?0:this.selectCollection.length-1])),this.currentControl=t,this._setSelection_(this.initControl,this.currentControl),$(document).on({mousemove:n,mouseup:function(t){delete this.initControl,delete this.currentControl,$(document).off("mousemove",null,n)}.bind(this)})},n.prototype._setVisibility_=function(){var t=this.fields.filter(function(t){return t.isInvisible});this.header.setInvisible(t);var e=t.map(function(t){return t.name});return this.content.forEach(function(t){t.setInvisible(e)}),this.footer&&this.footer.setInvisible(e),this},n.prototype.on=function(t,e,n){if(["control:tabulate"].includes(e)&&t.context===this)return this.send(e,n),!1;if(["control:updown"].includes(e)&&t.root===this.content)return this._onUpDown_(t,n),!1;if(["handle:mousedown"].includes(e)&&t.context.root===this.content){var o=t.context;return this._onMouseDown_(o,n,this._onMoveOverRows_.bind(this)),!1}if(["field:mousedown"].includes(e)&&t.context===this.header)return this._onMouseDown_(t,n,this._onMoveOverColumns_.bind(this)),!1;if(["handle:mousedown"].includes(e)&&t.context===this.header){var i=this.selectFields.length===this.fields.length,r=this.selectCollection.length===this._getAllRows_().length;return i&&r?this._setSelection_(this.content.activeElement,this.content.activeElement):this._setSelection_(this.fields[0],this.fields[this.fields.length-1]),!1}return["control:changed"].includes(e)&&t.context===this?(this._setSelection_(this.content.activeElement,this.content.activeElement),this.send(e,n),!1):void 0},n.prototype.getDefaultActiveElement=function(){return this.content},n.prototype.setInvisible=function(t){return this.fields.forEach(function(e){e.isInvisible=t.includes(e.name)}),this._setVisibility_(),this.getContent().activeElement&&this.focus(this.getContent().activeElement.getDefaultActiveElement()),this},n.prototype.getField=function(t){return this.fields.find(function(e){return e.name===t})},n.prototype.getContent=function(){return this.content},n.prototype.select=function(t){return this},n.prototype.deselect=function(t){return this},n}),define("fore/table/class",["core/Table"],function(t){"use strict";function e(e,n,o,i,r,s){t.call(this,e,n,o,i,r,s),this.element.on({keydown:function(t){[67].includes(t.which)&&(t.altKey&&!t.shiftKey&&(t.preventDefault(),t.stopPropagation(),this.copyData()),t.altKey&&t.shiftKey&&(t.preventDefault(),t.stopPropagation(),this.copyTable()))}.bind(this),paste:function(t){t.preventDefault(),t.stopPropagation(),this.paste(t.originalEvent.clipboardData.getData("text"))}.bind(this)})}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n,o){return["contextmenu:execute"].includes(n)&&this[o](),t.prototype.on.call(this,e,n,o)},e.prototype.setActiveStatus=function(e){return this.element.toggleClass("control-active",["active"].includes(e)),["active"].includes(e)?this.select():this.deselect(),t.prototype.setActiveStatus.call(this,e)},e.prototype.select=function(){return this.selection.forEach(function(t,e){t.forEach(function(n,o){n.element.addClass("table-cell-selected").css({"z-index":99});var i=n.element.css("border-top-color"),r="inset 0.5px 0px 0px 0px "+i,s="inset -0.5px 0px 0px 0px "+i,c="inset 0px 0.5px 0px 0px "+i,l="inset 0px -0.5px 0px 0px "+i,a="";0===o&&(a=a?a+", "+r:r),o===t.length-1&&(a=a?a+", "+s:s),0===e&&(a=a?a+", "+c:c),e===this.selection.length-1&&(a=a?a+", "+l:l),n.element.css({"box-shadow":a})}.bind(this))}.bind(this)),t.prototype.select.call(this)},e.prototype.deselect=function(){return this.selection.forEach(function(t,e){t.forEach(function(t,e){t.element.removeClass("table-cell-selected").css({"z-index":"","box-shadow":"none"})}.bind(this))}.bind(this)),t.prototype.deselect.call(this)},e.prototype.execute=function(t){return this.content.execute.call(this,t),this},e.prototype.toClipboard=function(t){var e=$("<textarea>").css({position:"fixed",opacity:"0"});e.prependTo("body").html(t).focus().select(),document.execCommand("copy"),this.focus(),e.remove()},e.prototype.copyData=function(){function t(t,e,n){return t.forEach(function(t){var o=e.controls[t.name],i=o.formatter(o.getValue())||"",r="@"!=t.msoFormatter()?i.replace(/\s/g,""):i;n=n.concat(r).concat(String.fromCharCode(9))}),n}var e="",n=this.selectFields.filter(function(t){return t.isVisible()});this.selectCollection.forEach(function(o){e=t(n,o,e).replace(/.$/,String.fromCharCode(13))}.bind(this)),this.toClipboard(e)},e.prototype.copyTable=function(){function t(t,e,n){return t.forEach(function(t){var o="mso-number-format:'"+t.msoFormatter()+"';";o+="border: .5pt solid #888";var i=e.controls[t.name],r=i.formatter(i.getValue())||"",s="@"!=t.msoFormatter()?r.replace(/\s/g,""):r;$('<td style= "'+o+'"></td>').appendTo(n).html(s)}),n}var e=$("<table>").css({"white-space":"nowrap"}),n=this.selectFields.filter(function(t){return t.isVisible()}),o=$("<tr>").css({background:"#ccc","text-align":"center"}).appendTo(e);n.forEach(function(t){$('<td style= "border: .5pt solid #888"></td>').html(t.getValue()).appendTo(o)}),this.selectCollection.forEach(function(o){t(n,o,$("<tr>").appendTo(e))}.bind(this)),this.toClipboard(e.prop("outerHTML"))},e.prototype.paste=function(t){var e=function(t,e,n){n&&(t.forEach(function(t,o){if(e.tabLoop.includes(e.controls[t.name])){var i=e.controls[t.name],r=i.formatter(n[o])||"";i.setValue(r).send("control:changed")}}),e.submit(function(t){this.content.dao&&this.content.dao.edit(t.attributes,this.parameters).execute(function(e){t.setContent(e[0])}.bind(this))}.bind(this)))}.bind(this),n=t.replace(/\n$/,"").split(/\n/).map(function(t){return t.split(/\t/)});this.selectCollection.forEach(function(t,o){e(this.selectFields,t,n[o])}.bind(this))},e}),define("fore/table/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n,o.template,o.headerBuilder,o.contentBuilder,o.footerBuilder)}return e}),define("fore/table/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/TableEntry",["./Entry"],function(t){"use strict";function e(e,n,o){t.call(this,e,n),this.handle=o(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n,o){if(["control:leftright"].includes(n)&&e.context===this){var i=37===o.which?-1:1;return this.nextControl(e,i),!1}return["handle:dblclick"].includes(n)&&e.context===this?(this.send(n,o),!1):t.prototype.on.call(this,e,n,o)},e.prototype.getDefaultActiveElement=function(){return t.prototype.getDefaultActiveElement.call(this)||this.handle},e.prototype.setInvisible=function(t){return Object.keys(this.controls).forEach(function(e){var n=this.controls[e];n.setVisibility(!t.includes(n.name))}.bind(this)),this},e.prototype.setItemId=function(e,n){var o=e.context.fields.filter(function(t){return t.isInvisible}).map(function(t){return t.name});return this.setInvisible(o),t.prototype.setItemId.call(this,e,n)},e}),define("fore/tableEntry/class",["core/TableEntry"],function(t){"use strict";function e(e,n,o){t.call(this,e,n,o)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setActiveStatus=function(e){return this.element.toggleClass("table-row-active",["active"].includes(e)),this.element.toggleClass("table-row-inactive",["inactive"].includes(e)),this.contextmenuItems.forEach(function(t){t.disabled=!["active","inactive"].includes(e)}),t.prototype.setActiveStatus.call(this,e)},e}),define("fore/tableEntry/builder",["./class","i18n!nls/root"],function(t,e){"use strict";function n(n,o,i){var r=function(t){return o.handleBuilder(t).setContextmenu(s)},s=["copyTable","copyData"].map(function(t){return{name:t,text:e.contextmenu[t].text,hotkey:e.contextmenu[t].hotkey,handler:function(e){e.send("contextmenu:execute",t)},disabled:!0}});return new(i||t)(n,o.template,r).setContent(o.controls).fillContent(o.attributes).setContextmenu(o.contextmenuItems)}return n}),define("fore/tableEntry/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/TableHandle",["./primitives"],function(t){"use strict";function e(t,e){n.call(this,t,e),this.element.on({dblclick:function(t){this.send("handle:dblclick")}.bind(this),mousedown:function(t){t.shiftKey&&t.preventDefault(),1===t.which&&this.send("handle:mousedown",t)}.bind(this)})}var n=t.Field;return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e}),define("fore/tableHandle/class",["core/TableHandle"],function(t){"use strict";return t}),define("fore/tableHandle/builder",["./class"],function(t){"use strict";function e(e){return new t(e,"*/handle")}return e}),define("fore/tableHandle/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/TableHeader",["./Control"],function(t){"use strict";function e(e,n,o,i){t.call(this,e,n,o),this.handle=i(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.addContent=function(t){var e=this.fields.concat(t.map(function(t){return t(this)}.bind(this))),n=this.element.find("[name]");return this.fields=e.map(function(t){return t.setItemId(this,n.index(t.element))}.bind(this)).sort(function(t,e){return t.itemId-e.itemId}).map(function(t,e){return t.setItemId(this,e)}.bind(this)),this},e.prototype.setContent=function(t){return this.fields=[],this.addContent(t)},e.prototype.setInvisible=function(t){return this.fields.forEach(function(e){e.setInvisible(t.includes(e))}),this},e}),define("fore/tableHeader/class",["core/TableHeader"],function(t){"use strict";return t}),define("fore/tableHeader/builder",["./class","i18n!nls/root"],function(t,e){"use strict";function n(n,o,i,r){var s=function(t){return i.handleBuilder(t).setContextmenu(c)},c=["copyTable","copyData"].map(function(t){return{name:t,text:e.contextmenu[t].text,hotkey:e.contextmenu[t].hotkey,handler:function(e){e.send("contextmenu:execute",t)},disabled:!0}});return new(r||t)(n,o,i.template,s).setContent(i.fields)}return n}),define("fore/tableHeader/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/TableHeaderField",["./Control"],function(t){"use strict";function e(e,n){t.call(this,e,n),this.isInvisible=!1,this.element.on({mousedown:function(t){t.shiftKey&&t.preventDefault(),1===t.which&&this.send("field:mousedown",t)}.bind(this)})}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setInvisible=function(t){return this.isInvisible=t,this.setVisibility(!this.isInvisible)},e.prototype.setValue=function(t){return this.title=t,this.element.find("label").remove(),this.element.prepend("<label>"+this.title+"</label>"),this},e.prototype.getValue=function(){return this.title},e}),define("fore/tableHeaderField/class",["core/TableHeaderField"],function(t){"use strict";function e(e,n,o){t.call(this,e,n),this.msoFormatter="function"==typeof o?o:function(){return"@"}}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}),define("fore/tableHeaderField/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n,o.msoFormatter).setValue(o.text)}return e}),define("fore/tableHeaderField/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tableList/class",["../table/class"],function(t){"use strict";function e(e,n,o,i,r,s){t.call(this,e,n,o,i,r,s)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.on=function(e,n,o){return["header:sort"].includes(n)&&e.context===this.header?(this.sort([e]),this.setSortStatus(e),!1):(["content:set"].includes(n)&&e.context===this&&(this.setSortStatus(e.sortFields[0]),this.footer&&(this.footer.data=e.getData(),this.footer.calculate())),t.prototype.on.call(this,e,n,o))},e.prototype.sort=function(t){return this.content.sort(t),this},e.prototype.setSortStatus=function(t){return this.fields.forEach(function(t){t.setSortStatus("none")}.bind(this)),t.setSortStatus("asc"),this},e}),define("fore/tableList/builder",["./class","../table/builder"],function(t,e){"use strict";function n(n,o,i,r){return e(n,o,i,r||t)}return n}),define("fore/tableList/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tableListEntry/class",["../tableEntry/class"],function(t){"use strict";function e(e,n,o){t.call(this,e,n,o)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setItemId=function(e,n){return this.handle.setValue(n+1),t.prototype.setItemId.call(this,e,n)},e}),define("fore/tableListEntry/builder",["./class","../tableEntry/builder"],function(t,e){"use strict";function n(n,o,i,r){return e(n,o,i,r||t)}return n}),define("fore/tableListEntry/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tableListField/class",["core/primitives"],function(t){"use strict";return t.Field}),define("fore/tableListField/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=new(i||t)(e,n,o.formatter,o.calculator,o.inputMaskBuilder);return void 0!=o.defaultValue&&r.setValue(o.defaultValue),r}return e}),define("fore/tableListField/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/TableFooter",["./Panel"],function(t){"use strict";function e(e,n,o,i){t.call(this,e,n,o),this.handle=i(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.setInvisible=function(t){return Object.keys(this.controls).forEach(function(e){var n=this.controls[e];n.setVisibility(!t.includes(n.name))}.bind(this)),this},e}),define("fore/tableListFooter/class",["core/TableFooter"],function(t){"use strict";return t}),define("fore/tableListFooter/builder",["./class","i18n!nls/root"],function(t,e){"use strict";function n(n,o,i,r){var s=function(t){return i.handleBuilder(t).setContextmenu(c)},c=["copyTable","copyData"].map(function(t){return{name:t,text:e.contextmenu[t].text,hotkey:e.contextmenu[t].hotkey,handler:function(e){e.send("contextmenu:execute",t)},disabled:!0}});return new(r||t)(n,o,i.template,s).setContent(i.controls)}return n}),define("fore/tableListFooter/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tableListHeader/class",["../tableHeader/class"],function(t){"use strict";function e(e,n,o,i,r){t.call(this,e,n,o,i,r)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e}),define("fore/tableListHeader/builder",["./class","../tableHeader/builder"],function(t,e){"use strict";function n(n,o,i,r){return e(n,o,i,r||t)}return n}),define("fore/tableListHeader/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tableListHeaderField/class",["../tableHeaderField/class","core/primitives"],function(t,e){"use strict";function n(e,n,o){t.call(this,e,n,o)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.setSortButton=function(t){return this.comparator=t,this.element.append('<div name="button"></div>'),this.button=new e.Button(this,"button",this.send.bind(this,"header:sort"),"▽",!1),this.button.element.css({float:"right",cursor:"default",padding:"2px","font-size":"1.0em"}),this},n.prototype.setSortStatus=function(t){if(this.button){var e={asc:"&#x25BC",desc:"&#x25B2",none:"&#x25BD"};this.button.element.html(e[t])}return this},n}),define("fore/tableListHeaderField/builder",["./class","../tableHeaderField/builder"],function(t,e){"use strict";function n(o,i,r,s){return n=e(o,i,r,s||t).setSortButton(r.comparator),n.sortOrder=r.sortOrder,n}return n}),define("fore/tableListHeaderField/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tableTreeEntry/class",["../tableEntry/class"],function(t){"use strict";function e(e,n,o){t.call(this,e,n,o)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,
e.prototype.setItemId=function(e,n){return t.prototype.setItemId.call(this,e,n),this.handle.setValue(this.attributes.code),this},e}),define("fore/tableTreeEntry/builder",["./class","../tableEntry/builder"],function(t,e){"use strict";function n(n,o,i,r){return e(n,o,i,r||t)}return n}),define("fore/tableTreeEntry/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("core/Tabs",["./Control"],function(t){"use strict";function e(t){this.context=t,this.element=$("<div>").attr({name:"handle"}).css({display:"flex","justify-content":"flex-start"}).appendTo(this.context.element)}function n(t){this.element=$("<div>").attr({name:"body"}).css({flex:"1 1 100%",display:"flex"}).appendTo(t.element)}function o(o,i){t.call(this,o,i),this.element.css({display:"flex","flex-direction":"column-reverse"}),this.body=new n(this),this.handle=new e(this),this.tabs=[]}return e.prototype.addTabProxy=function(t){t.handle.element.on({mousedown:function(e){e.preventDefault(),e.stopPropagation(),t.send("handle:mousedown",e)}.bind(this)}).appendTo(this.element)},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.on=function(t,e,n){return["control:focusin"].includes(e)&&t.root===this?(this.send(e,n),!1):["handle:mousedown"].includes(e)&&t.root===this?(this.setActiveElement(t).focus(),this.send("config:changed"),!1):["tab:destroy"].includes(e)&&t.root===this?(this.removeTabs([t]),t===this.activeElement&&(this.tabs.length?this.setActiveElement(this.tabs[this.tabs.length-1]).focus():delete this.activeElement),this.send("config:changed"),!1):void 0},o.prototype.setActiveElement=function(t){return this.activeElement&&this.activeElement!=t&&this.activeElement.setActiveStatus("none"),this.tabs.forEach(function(t,e){t.setVisibility(!1)}.bind(this)),t.setVisibility(!0),t&&!t.isActive&&t.setActiveStatus("inactive"),this.activeElement=t},o.prototype.addTabs=function(t){return t.map(function(t){var e=t(this).setItemId(this,this.tabs.length).setVisibility(!1);return this.handle.addTabProxy(e),this.tabs.push(e),e}.bind(this))},o.prototype.removeTabs=function(t){return t.length&&(t.forEach(function(t){t.handle.element.remove(),t.element.remove()}),this.tabs=this.tabs.filter(function(e){return!t.includes(e)})),this.activeElement},o.prototype.getTabByRoute=function(t){return this.tabs.find(function(e){return e.route===t})},o.prototype.getConfig=function(){return this.tabs.reduce(function(t,e){return e.route&&t.push(e.route),t},[])},o}),define("core/Tab",["./Control","./primitives"],function(t,e){"use strict";function n(e,n){t.call(this,e,n),this.element.css({margin:"auto","margin-left":"0",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","pointer-events":"none"})}function o(o,i){t.call(this,o,i),this.element.attr({tabindex:0}).css({display:"flex","justify-content":"space-between"}),$('<div class="tab-handle-title" name="title"></div>').appendTo(this.element),this.title=new n(this,"*/title"),$('<button style="font-size: 110%;" name="close">&#x2716</button>').appendTo(this.element),this.btnClose=new e.Button(this,"*/close",this.context.destroy.bind(this.context))}function i(e,n){t.call(this,e,"body",'create:<div class="tab" name="tab"></div>'),this.element.attr({tabindex:0}).css({height:"100%",width:"100%",display:"flex"}),$('<div class="tab-handle" name="handle"></div>').appendTo(this.element),this.handle=new o(this,"handle"),$('<div class="tab-content" name="content"></div>').css({flex:"1 0 100%",display:"flex"}).appendTo(this.element),this.content=n(this);var i=$('<div class="tab-body" name="body"></div>').css({flex:"1 0 100%",display:"flex"});this.content.element.wrap(i),this.content.element.hide().fadeTo(400,1)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.setValue=function(t){return this.element.html(t),this},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.on=function(t,e,n){if(["control:focusin"].includes(e))return this.send(e,n),!1;["setHeader"].includes(e)&&t.context===this&&this.setHeader(n),["setRoute"].includes(e)&&t.context===this&&this.setRoute(n)},i.prototype.getDefaultActiveElement=function(){return this.content},i.prototype.destroy=function(){this.send("tab:destroy")},i.prototype.setHeader=function(t){return this.handle.title.setValue(t),this},i.prototype.setRoute=function(t){return this.route=t,this},i}),define("fore/tabs/class",["core/Tabs","core/Tab"],function(t,e){"use strict";function n(t,n){e.call(this,t,n)}function o(e,n){t.call(this,e,n)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.setActiveStatus=function(t){return this.handle.element.toggleClass("tab-handle-selected",["active","inactive"].includes(t)),e.prototype.setActiveStatus.call(this,t)},o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.addTabs=function(e){var o=e.map(function(t){return function(e){return new n(e,t)}});return t.prototype.addTabs.call(this,o)},o}),define("fore/tabs/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n)}return e}),define("fore/tabs/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/tree/class",["core/Tree"],function(t){"use strict";function e(e,n,o,i,r,s,c){t.call(this,e,n,o,i,r,s),c&&(this.dao=c(this.application)),this.parameters=""}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.getDefaultActiveElement=function(){if(this.entry)return this.entry;this.execute(function(t){this.entry.focus()}.bind(this))},e.prototype.setState=function(e){t.prototype.setState.call(this,"expanded")},e.prototype.create=function(e,n){var o=function(o){var i={attributes:Object.assign(this.dao.parse(n),n||{},{id:null,code:n.code+"*."}),onSubmit:function(e){var o=Object.assign(e.attributes,{code:n.code});this.dao=this.dao.create(o,this.parameters).execute(function(e){t.prototype.create.call(this,e)}.bind(this))}.bind(this)};return e(o,"*/content",i)}.bind(this);this.application.addWindow(o,!0)},e.prototype.edit=function(e,n){var o=function(o){var i={attributes:Object.assign({},n),onSubmit:function(e){this.dao=this.dao.edit(e.attributes,this.parameters).execute(function(e){t.prototype.edit.call(this,e)}.bind(this))}.bind(this)};return e(o,"*/content",i)}.bind(this);this.application.addWindow(o,!0)},e.prototype.moveBranch=function(e,n,o){var i=function(o){var i={attributes:{what:n.id,position:"inside",where:this.entry.attributes.id},onSubmit:function(e){this.dao=this.dao.moveBranch(e.attributes,this.parameters).execute(function(n){t.prototype.moveBranch.call(this,n,e.attributes.what)}.bind(this))}.bind(this),data:this.getData()};return e(o,"*/content",i)}.bind(this);this.application.addWindow(i,!0)},e.prototype.removeBranch=function(e,n,o,i){var r=function(r){var s={attributes:Object.assign({},n),onSubmit:function(e){this.dao=this.dao.removeBranch(e.attributes,this.parameters).execute(function(e){t.prototype.removeBranch.call(this,e)}.bind(this))}.bind(this),onNo:function(t){},header:o,message:i};return e(r,"*/content",s)}.bind(this);this.application.addWindow(r,!0)},e.prototype.fetchContent=function(t,e){return this.parameters=e,this.dao=this.dao[t](e).execute(function(t){this.setActiveElement(void 0),this.setContent(t)}.bind(this)),this},e.prototype.execute=function(t){return this.dao?this.dao=this.dao.execute(function(e){t.call(this,this.getData())}.bind(this)):t.call(this,this.getData()),this},e}),define("fore/tree/builder",["./class"],function(t){"use strict";function e(e,n,o,i){var r=new(i||t)(e,n,o.template,o.container,o.rootEntryBuilder,o.branchBuilder,o.daoBuilder);return o.daoBuilder&&"none"!=o.method&&r.fetchContent(o.method||"getData",o.filter||""),r}return e}),define("fore/tree/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/treeBranch/class",["core/TreeBranch","core/primitives","icons/dir"],function(t,e,n){"use strict";function o(o,i,r,s,c){t.call(this,o,i,r,s,c),this.btnExpand=new e.Button(this,"*/expand",this.setState.bind(this,"expanded"),"",n.expand),this.btnCollapse=new e.Button(this,"*/collapse",this.setState.bind(this,"collapsed"),"",n.collapse)}return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.setState=function(e){t.prototype.setState.call(this,e),this.btnExpand.setVisibility("expanded"!=this.state&&"none"!=this.state),this.btnCollapse.setVisibility("collapsed"!=this.state&&"none"!=this.state)},o}),define("fore/treeBranch/builder",["./class"],function(t){"use strict";function e(e,n,o,i){return new(i||t)(e,n,o.template,o.container,o.entryBuilder)}return e}),define("fore/treeBranch/dir",["./class","./builder"],function(t,e){"use strict";return{Class:t,builder:e}}),define("fore/dir",["./application/dir","./button/dir","./buttonFile/dir","./buttonToggle/dir","./control/dir","./entry/dir","./field/dir","./form/dir","./label/dir","./list/dir","./panel/dir","./radio/dir","./select/dir","./selectDropdown/dir","./table/dir","./tableEntry/dir","./tableHandle/dir","./tableHeader/dir","./tableHeaderField/dir","./tableList/dir","./tableListEntry/dir","./tableListField/dir","./tableListFooter/dir","./tableListHeader/dir","./tableListHeaderField/dir","./tableTreeEntry/dir","./tabs/dir","./tree/dir","./treeBranch/dir"],function(t,e,n,o,i,r,s,c,l,a,u,d,h,p,f,b,m,y,v,g,x,w,C,E,_,T,I,S,L){"use strict";function j(t,e,n){return function(o){return e(o,t,n||{})}}return{bindBuilder:j,application:t,button:e,buttonFile:n,buttonToggle:o,control:i,entry:r,field:s,form:c,label:l,list:a,panel:u,radio:d,select:h,selectDropdown:p,table:f,tableEntry:b,tableHandle:m,tableHeader:y,tableHeaderField:v,tableList:g,tableListEntry:x,tableListField:w,tableListFooter:C,tableListHeader:E,tableListHeaderField:_,tableTreeEntry:T,tabs:I,tree:S,treeBranch:L}}),define("text!plugins/report/template.htpl",[],function(){return'<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse; table-layout: fixed">\r\n\t<colgroup></colgroup>\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<th class=title name="title">\r\n\t\t\t\t<div style="float: left" name="titleLeft"></div>\r\n\t\t\t\t<div style="float: right" name="titleRight"></div>\r\n\t\t\t</th>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody></tbody>\r\n\t<tfoot></tfoot>\r\n</table>'}),define("text!plugins/report/style.css",[],function(){return'table{vertical-align:middle;color:black;font-size:10.0pt;font-weight:400;font-style:normal;text-decoration:none;font-family:"Times New Roman",serif;white-space:nowrap;mso-font-charset:204;mso-background-source:auto;mso-pattern:auto;mso-displayed-decimal-separator:"\\,";mso-displayed-thousand-separator:" ";mso-ignore:padding;}th{padding:2pt 1pt 6pt;border:.5pt solid windowtext;mso-number-format:General;}td{border:.5pt solid windowtext;padding:0px 4px;text-align:left;mso-char-indent-count:1;mso-number-format:General;}.title{height:30.0pt;border:none;text-align:right;font-size:12.0pt;font-weight:700;mso-number-format:\\@;}.number,.currency{border:.5pt solid windowtext;padding-right:4px;text-align:right;mso-char-indent-count:1;}.number{mso-number-format:\\#\\ \\#\\#0\\;}.currency{mso-number-format:Standard;}.date{border:.5pt solid windowtext;text-align:center;mso-number-format:"dd\\/mm\\/yy\\;\\@";}'}),define("text!plugins/report/script.js",[],function(){return"function toNumber(string) {\r\n\treturn (string != undefined) ? parseFloat(('' + string).replace(',', '.').replace(/\\s/g, '')) : null;\r\n}\r\n\r\nfunction toLocaleDateString(date, isLong) {\r\n\tvar options = {\r\n\t\tyear : '2-digit',\r\n\t\tmonth : 'numeric',\r\n\t\tday : 'numeric'\r\n\t};\r\n\r\n\tif (isLong) {\r\n\t\toptions = Object.assign(options, {\r\n\t\t\thour : 'numeric',\r\n\t\t\tminute : 'numeric',\r\n\t\t\tsecond : 'numeric'\r\n\t\t})\r\n\t}\r\n\r\n\treturn (date != undefined) ? new Date(date).toLocaleDateString(undefined, options) : null;\r\n}\r\n\r\ndocument.querySelectorAll('td[data-type]').forEach(function(item) {\r\n\tif (item.innerHTML) {\r\n\t\tswitch (item.getAttribute('data-type')) {\r\n\t\tcase 'number':\r\n\t\t\titem.innerHTML = toNumber(item.innerHTML).toLocaleString(undefined, {});\r\n\t\t\tbreak;\r\n\t\tcase 'currency':\r\n\t\t\titem.innerHTML = toNumber(item.innerHTML).toLocaleString(undefined, {\r\n\t\t\t\tminimumFractionDigits : 2,\r\n\t\t\t\tmaximumFractionDigits : 2\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\t\tcase 'date':\r\n\t\t\titem.innerHTML = toLocaleDateString(item.innerHTML);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n});"}),define("plugins/report/builder",["text!./template.htpl","text!./style.css","text!./script.js"],function(t,e,n){"use strict";function o(t,e){var n=t.type?t.type:"",o=e||"";return $("<td>").addClass(n).html(o||("currency"===t.type?0:"")).attr({"data-type":t.type})}function i(e,n,i,r){var s=$(t),c=[];i.forEach(function(t){["group"].includes(t.type)?t.fields.forEach(function(t){c.push(t)}):c.push(t)}),c.forEach(function(t){$("<col>").css({width:t.width}).appendTo(s.find("colgroup"))});var l=s.find("thead");l.find('[name="title"]').attr({colspan:c.length}),l.find('[name="titleLeft"]').html(e.left||""),l.find('[name="titleRight"]').html(e.right||"");var a=$("<tr>").appendTo(l),u=$("<tr>").appendTo(l);i.forEach(function(t){$("<th>").attr({rowspan:t.fields?1:2,colspan:t.fields?t.fields.length:1}).html(t.text).appendTo(a),t.fields&&t.fields.forEach(function(t){$("<th>").attr({rowspan:1,colspan:1}).html(t.text).appendTo(u)})});var d=s.find("tbody");return r.forEach(function(t){var e=$("<tr>").css({height:n.height||""}).appendTo(d);c.forEach(function(n){o(n,t[n.name]).css({"white-space":n.breaklines?"normal":"inherit"}).appendTo(e)})}),s}function r(t,o,r,s){var c=document.implementation.createHTMLDocument("Report"),l=$(c.querySelector("head"));l.append('<meta http-equiv=Content-Type content="text/html; charset=UTF-8">'),l.append("<meta name=ProgId content=Excel.Sheet>"),$("<style>").appendTo(l).html(e);var a=$(c.querySelector("body"));return i(t,o,r,s).appendTo(a),$("<script>").appendTo(a).html(n),c}function s(t,e,n,o,i){var s=r(e,n,o,i).childNodes[1].outerHTML,c=new Blob([s],{type:"text/html"});$("<a>").attr({href:URL.createObjectURL(c),download:t+".htm"})[0].click()}return s}),define("plugins/dir",["./report/builder"],function(t){"use strict";return{report:t}}),define("as",["css!./config/css/style","i18n!nls/root","icons/dir","dao/dir","fore/dir","plugins/dir"],function(t,e,n,o,i,r){"use strict";return{locale:e,icons:n,dao:o,generics:i,plugins:r}}),function(t){var e=document,n="appendChild",o="styleSheet",i=e.createElement("style");i.type="text/css",e.getElementsByTagName("head")[0][n](i),i[o]?i[o].cssText=t:i[n](e.createTextNode(t))}("html *{box-sizing:border-box;border:0;outline:0;font-family:sans-serif;font-size:11px}div{user-select:none}button{background-color:transparent;padding:0}.group{border:1px solid #aaa;border-radius:6px}.message{padding-bottom:6px}.field-group{display:flex;justify-content:space-between;padding:3px 0}.label{margin-left:auto;padding-right:4px;line-height:20px}.field,.tooltip{border:1px solid #aaa}.tooltip{background-color:#ffffd5;white-space:nowrap;padding:2px 6px}.field{height:20px;padding:1px 4px}textarea.field{height:100%;display:table-cell;padding:4px}.number{text-align:right}.control-active{outline:3px auto #39f}.buttons-bottom,.buttons-top{width:100%;display:flex;justify-content:space-between}.buttons-top{margin:0 0 6px}.buttons-bottom{margin:6px 0 0}.buttons-left,.buttons-right{display:flex;align-items:center}.button{border:1px solid #fff;border-radius:3px}.button.button-image{height:22px;width:22px;margin:1px;padding:1px;text-align:center}.button.button-text{height:22px;margin:.5px 1px;padding:1px 4px}.button.button-list{width:calc(100% - 1px);border-radius:0}.button.button-list,.button.button-tree{margin:.5px;padding:1px 4px;text-align:left}.button:hover{border-color:#aaa}.button.button-image.button-active,.button.button-image.button-active:hover,.button.button-text.button-active,.button.button-text.button-active:hover{outline:3px auto #39f;border-color:#39f}.button.button-text.button-inactive{background-color:#f1f1f1;border-color:#aaa}.button.button-list.button-active,.button.button-list.button-active:hover,.button.button-tree.button-active,.button.button-tree.button-active:hover{background-color:#39f;border-color:#39f;color:#fff}.button.button-list.button-inactive,.button.button-tree.button-inactive{background-color:#f1f1f1;border-color:#aaa}.button.button-pressed,.button.button:active{box-shadow:-.25px -.25px 0 1px #d4d4d4}.button-expcol{display:flex;justify-content:center;margin-right:2px}.table,.table-cell{border:1px solid #aaa}.table{display:flex;flex-direction:column;line-height:1.5}.table-cell{flex:1 1 100%;padding:0 4px;margin-top:-1px;margin-left:-1px}.table-row-handle{flex:0 0 25px;outline:0;text-align:center}.table-header{text-align:center}.table-footer{margin-top:1px;font-weight:700;line-height:1.7}.table-footer,.table-header{flex:0 0 100%}.warning{color:red}.table-row-active div.table-cell{background-color:#39f;color:#fff}.table-row-active div.warning{color:#c70000}.table-row-inactive div.table-cell{background-color:#e9e9e9}.table-row-inactive div.warning{color:red}.table-cell-selected{border-color:#39f}div.table-cell-selected{background-color:#ecf3ff}input.table-cell-selected,textarea.field{background-color:#ffffd5}.window{background-color:#fff;border:1px solid;border-color:#555;border-radius:3px;box-shadow:2px 2px 8px 2px #bbb}.window-handle{background-color:#f1f1f1;padding:2px 10px 2px 6px}.window-body,.window-handle-selected{background-color:#fff}.window-body{padding:6px}.window-content{min-width:200px;border:1px solid #aaa;border-radius:6px;padding:6px}.tabs{height:100%}.tab-handle{background-color:#f1f1f1;height:28px;width:120px;border:1px solid #aaa;border-top-left-radius:6px;border-top-right-radius:6px;padding:0 10px 2px 6px}.tab-handle-selected{background-color:#fff;border-bottom-color:#fff}.tab-body{background-color:#fff;border:1px solid #aaa;border-top-right-radius:6px;border-bottom-right-radius:6px;border-bottom-left-radius:6px;padding:6px}.tab-content{border:1px solid #aaa;border-radius:6px;padding:6px 10px}")}();